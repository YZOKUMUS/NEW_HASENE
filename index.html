<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Hasene ArapÃ§a Dersi</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Hasene - ArapÃ§a Ã¶ÄŸrenmeyi eÄŸlenceli hale getiren interaktif eÄŸitim oyunu. Kuran kelimelerini Ã¶ÄŸren, rozet topla, gÃ¼nlÃ¼k gÃ¶revleri tamamla. 6 farklÄ± oyun modu ile ArapÃ§a Ã¶ÄŸren.">
    <meta name="keywords" content="arapÃ§a Ã¶ÄŸrenme, kuran kelimeleri, arapÃ§a oyun, islami eÄŸitim, arapÃ§a ders, kuran Ã¶ÄŸrenme, dua Ã¶ÄŸrenme, hadis Ã¶ÄŸrenme">
    <meta name="author" content="YZOKUMUS">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Turkish">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yzokumus.github.io/NEW_HASENE/">
    <meta property="og:title" content="Hasene - ArapÃ§a Ã–ÄŸrenme Oyunu">
    <meta property="og:description" content="ArapÃ§a Ã¶ÄŸrenmeyi eÄŸlenceli hale getiren interaktif eÄŸitim oyunu. Kuran kelimelerini Ã¶ÄŸren, rozet topla, gÃ¼nlÃ¼k gÃ¶revleri tamamla.">
    <meta property="og:image" content="assets/images/icon-512-v4-RED-MUSHAF.png">
    <meta property="og:image:width" content="512">
    <meta property="og:image:height" content="512">
    <meta property="og:locale" content="tr_TR">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://yzokumus.github.io/NEW_HASENE/">
    <meta name="twitter:title" content="Hasene - ArapÃ§a Ã–ÄŸrenme Oyunu">
    <meta name="twitter:description" content="ArapÃ§a Ã¶ÄŸrenmeyi eÄŸlenceli hale getiren interaktif eÄŸitim oyunu. Kuran kelimelerini Ã¶ÄŸren, rozet topla, gÃ¼nlÃ¼k gÃ¶revleri tamamla.">
    <meta name="twitter:image" content="assets/images/icon-512-v4-RED-MUSHAF.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/images/icon-192-v4-RED-MUSHAF.png">
    
    <!-- Manifest -->
    <link rel="manifest" href="manifest.json">



    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Hasene ArapÃ§a">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-config" content="browserconfig.xml">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data:; media-src 'self' https://audios.quranwbw.com https://tanzil.net https://everyayah.com; connect-src 'self' https://audios.quranwbw.com https://tanzil.net https://everyayah.com;">
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="assets/images/icon-192-v4-RED-MUSHAF.png">
    <link rel="apple-touch-icon" sizes="192x192" href="assets/images/icon-192-v4-RED-MUSHAF.png">
    <link rel="apple-touch-icon" sizes="512x512" href="assets/images/icon-512-v4-RED-MUSHAF.png">
    
    <!-- Uthmani Kur'an Fonts -->
    <!-- Note: Uthmani font is loaded locally via style.css (KFGQPC Uthmanic Script HAFS Regular.otf) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Google Fonts with error handling - loads asynchronously to prevent blocking on certificate errors -->
    <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;500;600;700&family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet" media="print" onload="this.media='all'" onerror="this.onerror=null; this.remove();">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@400;500;600;700&family=Nunito:wght@400;500;600;700;800&display=swap" rel="stylesheet"></noscript>
    
    <!-- Material Icons (served via Google Fonts) -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet" media="print" onload="this.media='all'" onerror="this.onerror=null; this.remove();">
    <noscript><link href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap" rel="stylesheet"></noscript>
    
    <!-- Flutter Modern CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- ModÃ¼ler JavaScript DosyalarÄ± -->
    <script src="js/config.js"></script>
    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/error-handler.js"></script>
    <script src="js/error-boundary.js"></script>
    <script src="js/safety-checks.js"></script>
    <script src="js/event-handler.js"></script>
    <!-- <script src="js/event-manager.js"></script> --> <!-- REMOVED: Duplicate eventManager - Using EventListenerManager in main script instead -->
    <script src="js/data-loader.js"></script>
    <script src="js/favorites.js"></script>
    <script src="js/feedback-animations.js"></script>
    <script src="js/sound-effects.js"></script>
    <script src="js/badge-visualization.js"></script>
    <script src="js/game-tutorial.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/leaderboard.js"></script>
    <script src="js/social-share.js"></script>
    <script src="js/detailed-stats.js"></script>
    
    <!-- Structured Data (JSON-LD) for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "EducationalApplication",
        "name": "Hasene ArapÃ§a Dersi",
        "alternateName": "Hasene Arabic Game",
        "description": "ArapÃ§a Ã¶ÄŸrenmeyi eÄŸlenceli hale getiren interaktif eÄŸitim oyunu. Kuran kelimelerini Ã¶ÄŸren, rozet topla, gÃ¼nlÃ¼k gÃ¶revleri tamamla.",
        "url": "https://yzokumus.github.io/NEW_HASENE/",
        "applicationCategory": "EducationalGame",
        "operatingSystem": "Web",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "TRY"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5",
            "ratingCount": "1"
        },
        "featureList": [
            "Kelime Ã‡evir - ArapÃ§a kelimelerin TÃ¼rkÃ§e karÅŸÄ±lÄ±klarÄ±nÄ± bul",
            "Dinle ve Bul - Sesli telaffuzlarla kelimeleri Ã¶ÄŸren",
            "BoÅŸluk Doldur - Ayetlerdeki eksik kelimeleri tamamla",
            "Ayet Oku - Kuran ayetlerini okuyun ve Ã¶ÄŸrenin",
            "Dua Ã–ÄŸren - GÃ¼nlÃ¼k dualarÄ± Ã¶ÄŸrenin",
            "Hadis Oku - Hadis-i ÅŸerifleri okuyun",
            "Rozet Sistemi - Bronz, GÃ¼mÃ¼ÅŸ, AltÄ±n, Elmas rozetler",
            "GÃ¼nlÃ¼k GÃ¶revler - Her gÃ¼n yeni hedefler",
            "Ä°statistikler - Performans takibi"
        ],
        "screenshot": "assets/images/icon-512-v4-RED-MUSHAF.png",
        "logo": "assets/images/icon-512-v4-RED-MUSHAF.png",
        "author": {
            "@type": "Person",
            "name": "YZOKUMUS"
        },
        "inLanguage": "tr",
        "isAccessibleForFree": true
    }
    </script>
    
</head>
<body>
    <!-- Loading SayfasÄ± - Profesyonel TasarÄ±m -->
    <div class="loading-screen-new loading-screen-pro" id="loadingScreen">
        <!-- Logo Container with Modern Glassmorphism Design -->
        <div class="loading-logo-wrapper loading-logo-container-pro">
            <div class="loading-logo-circle">
                <img src="assets/images/icon-512-v4-RED-MUSHAF.png" alt="HASENE Logo" class="loading-logo-img loading-logo-img-pro" loading="eager" fetchpriority="high" onerror="this.onerror=null; this.style.display='none'; this.parentElement.innerHTML='<div style=\'color:white;font-size:60px;font-weight:bold;\'>ğŸ“–</div>';">
            </div>
        </div>
        
        <!-- App Title -->
        <h1 class="loading-app-title loading-app-title-pro">HASENE</h1>

        <!-- Hadith Container - Modern Card Design -->
        <div class="loading-hadith-container loading-hadith-container-pro" id="hadisBox">
            <div class="loading-hadith-arabic-text loading-hadith-arabic-pro" id="hadisArabic">
                Ù…ÙÙ†Ù’ Ù‚ÙØ±ÙØ£Ù Ø­ÙØ±Ù’ÙÙ‹Ø§ Ù…ÙÙ†Ù’ ÙƒÙØªÙØ§Ø¨Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ„ÙÙ‡Ù Ø¨ÙÙ‡Ù Ø­ÙØ³ÙÙ†ÙØ©ÙŒ ÙˆÙØ§Ù„Ù’Ø­ÙØ³ÙÙ†ÙØ©Ù Ø¨ÙØ¹ÙØ´Ù’Ø±Ù Ø£ÙÙ…Ù’Ø«ÙØ§Ù„ÙÙ‡ÙØ§
            </div>
            <div class="loading-hadith-turkish-text loading-hadith-turkish-pro" id="hadisTurkish">
                "Kim Allah'Ä±n kitabÄ±ndan bir harf okursa, ona bir sevap verilir. O sevap da on mislidir."
            </div>
            <div class="loading-hadith-source-text loading-hadith-source-pro">(Tirmizi, SevÃ¢bÃ¼'l-Kur'Ã¢n 16)</div>
        </div>

        <!-- Loading Dots Animation -->
        <div class="loading-dots-pro">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>

        <!-- Progress Section -->
        <div class="loading-progress-wrapper loading-progress-container-pro">
            <div class="loading-progress-text loading-progress-label-pro" id="loadingProgressLabel">Kelime verileri yÃ¼kleniyor...</div>
            <div class="loading-progress-track loading-progress-track-pro">
                <div class="loading-progress-fill loading-progress-fill-pro" id="loadingProgressBar"></div>
            </div>
        </div>
        
        <!-- Copyright -->
        <div class="loading-footer-text loading-footer-pro">Â© YZOKUMUS 2025</div>
    </div>

   




    <!-- Onboarding/Tutorial Modal - Yeni Oyuncular Ä°Ã§in -->
    <div class="modal onboarding-modal" id="onboardingModal" style="display: none;">
        <div class="onboarding-container">
            <div class="onboarding-progress">
                <div class="progress-bar" id="onboardingProgressBar"></div>
                <div class="progress-text" id="onboardingProgressText">1 / 6</div>
            </div>
            <div class="onboarding-slides" id="onboardingSlides">
                <div class="onboarding-slide active" data-slide="1">
                    <div class="slide-icon">ğŸ‘‹</div>
                    <h2 class="slide-title">Ehlen ve Sehlen!</h2>
                    <p class="slide-description">Kur'an-Ä± Kerim kelimelerini Ã¶ÄŸrenmek iÃ§in hazÄ±r mÄ±sÄ±n?<br>Bu kÄ±sa turda sana dersi tanÄ±tacaÄŸÄ±z.</p>
                </div>
                <div class="onboarding-slide" data-slide="2">
                    <div class="slide-icon">ğŸ®</div>
                    <h2 class="slide-title">6 FarklÄ± Ders TÃ¼rÃ¼</h2>
                    <div class="slide-features">
                        <div class="feature-item">ğŸ“š <strong>Kelime Ã‡evir</strong> - Kelimeleri Ã¶ÄŸren</div>
                        <div class="feature-item">ğŸ§ <strong>Dinle & Bul</strong> - Dinleyerek bul</div>
                        <div class="feature-item">ğŸ“ <strong>BoÅŸluk Doldur</strong> - Ayetleri tamamla</div>
                        <div class="feature-item">ğŸ“– <strong>Ayet Oku</strong> - Ayetleri oku</div>
                        <div class="feature-item">ğŸ¤² <strong>Dua Ã–ÄŸren</strong> - DualarÄ± Ã¶ÄŸren</div>
                        <div class="feature-item">ğŸ“œ <strong>Hadis Oku</strong> - Hadisleri oku</div>
                    </div>
                </div>
                <div class="onboarding-slide" data-slide="3">
                    <div class="slide-icon">ğŸ“¿</div>
                    <h2 class="slide-title">Hasene Sistemi</h2>
                    <p class="slide-description">Her doÄŸru cevap ile <strong>Hasene</strong> kazanÄ±rsÄ±n!<br><br><span style="font-size: 0.9em; color: #666;">â€¢ 100 Hasene = 1 â­ YÄ±ldÄ±z<br>â€¢ Her 3 doÄŸru = +5 Hasene Ä°hsan<br>â€¢ GÃ¼nlÃ¼k virdi tamamla = +1,000 Hasene</span></p>
                </div>
                <div class="onboarding-slide" data-slide="4">
                    <div class="slide-icon">ğŸ¯</div>
                    <h2 class="slide-title">GÃ¼nlÃ¼k Vazifeler</h2>
                    <p class="slide-description">Her gÃ¼n yeni vazifeler seni bekliyor!<br><br><span style="font-size: 0.9em; color: #666;">â€¢ 8 temel vazife + 3 fazilet vazifesi<br>â€¢ TÃ¼m vazifeleri tamamla = +2,500 Hasene<br>â€¢ Her gÃ¼n sÄ±fÄ±rlanÄ±r</span></p>
                </div>
                <div class="onboarding-slide" data-slide="5">
                    <div class="slide-icon">ğŸ”¥</div>
                    <h2 class="slide-title">Muvazebet (Streak)</h2>
                    <p class="slide-description">Her gÃ¼n talebe et, serini bozma!<br><br><span style="font-size: 0.9em; color: #666;">â€¢ Her gÃ¼n talebe ederek serini artÄ±r<br>â€¢ GÃ¼nlÃ¼k virdi tamamla = +1 gÃ¼n<br>â€¢ En uzun serini kÄ±rma!</span></p>
                </div>
                <div class="onboarding-slide" data-slide="6">
                    <div class="slide-icon">ğŸš€</div>
                    <h2 class="slide-title">HazÄ±rsÄ±n!</h2>
                    <p class="slide-description">ArtÄ±k derslere baÅŸlayabilirsin!<br><br><span style="font-size: 0.9em; color: #666;">HayÄ±rlÄ± talebe ve muvaffakiyetler!<br>Her gÃ¼n biraz daha terakki et! ğŸ“ˆ</span></p>
                </div>
            </div>
            <div class="onboarding-buttons">
                <button class="onboarding-btn skip-btn" id="onboardingSkipBtn" onclick="event.stopPropagation(); skipOnboarding();" style="display: block !important; visibility: visible !important; opacity: 1 !important;">Atla</button>
                <button class="onboarding-btn next-btn" id="onboardingNextBtn" onclick="event.stopPropagation(); nextOnboardingSlide();" style="display: block !important; visibility: visible !important; opacity: 1 !important;">Ä°leri â†’</button>
            </div>
        </div>
    </div>

        <!-- Ana MenÃ¼ -->
        <div class="main-menu" id="mainMenu">
            <!-- Hero Section - Minimal Kompakt TasarÄ±m -->
            <div class="hero-section hero-section-minimal">
                <div class="hero-content hero-content-minimal">
                    <!-- Compact Header -->
                    <div class="hero-header-minimal" style="display: flex; align-items: center; justify-content: space-between; gap: 8px;">
                        <div class="welcome-minimal" style="flex: 1;">
                            <div class="welcome-title-minimal">Ehlen ve Sehlen! ğŸ‘‹</div>
                            <div class="welcome-subtitle-minimal">BugÃ¼n hangi dersi Ã§alÄ±ÅŸmak istersin?</div>
                        </div>
                        <!-- Dark Mode Toggle Butonu - SaÄŸ Ãœst KÃ¶ÅŸe -->
                        <button id="darkModeToggle" onclick="toggleDarkMode()" aria-label="KaranlÄ±k modu aÃ§/kapat" role="button" title="KaranlÄ±k Mod" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s; z-index: 10; flex-shrink: 0; font-size: 14px;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 4px 12px rgba(102, 126, 234, 0.5)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 2px 8px rgba(102, 126, 234, 0.3)'">
                            <span id="darkModeIcon" aria-hidden="true">ğŸŒ™</span>
                        </button>
                        <!-- TEST: Reset Butonu - SaÄŸ Ãœst KÃ¶ÅŸe (Test AmaÃ§lÄ±) -->
                        <button onclick="confirmResetStats()" class="reset-stats-btn" aria-label="Test: TÃ¼m Ä°statistikleri SÄ±fÄ±rla" role="button" style="background: rgba(231, 76, 60, 0.9); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3); transition: all 0.3s; z-index: 10; opacity: 0.7; flex-shrink: 0;" onmouseover="this.style.opacity='1'; this.style.transform='scale(1.1)'; this.style.boxShadow='0 4px 12px rgba(231, 76, 60, 0.5)'" onmouseout="this.style.opacity='0.7'; this.style.transform='scale(1)'; this.style.boxShadow='0 2px 8px rgba(231, 76, 60, 0.3)'" title="Test: TÃ¼m Ä°statistikleri SÄ±fÄ±rla">
                            <span style="font-size: 14px;" aria-hidden="true">ğŸ”„</span>
                        </button>
                    </div>

                    <!-- Compact Stats Row -->
                    <div class="stats-row-minimal" role="region" aria-label="Oyuncu istatistikleri">
                        <div class="stat-item-minimal" role="group" aria-label="Hasene puanÄ±">
                            <div class="stat-value-minimal hasene" id="gamePoints" aria-live="polite" aria-atomic="true">0</div>
                            <div class="stat-label-minimal">Hasene</div>
                        </div>
                        <div class="stat-item-minimal" role="group" aria-label="YÄ±ldÄ±z puanÄ±">
                            <div class="stat-value-minimal star" id="starPoints" aria-live="polite" aria-atomic="true">0</div>
                            <div class="stat-label-minimal"><span aria-hidden="true">â­</span> YÄ±ldÄ±z</div>
                        </div>
                        <div class="stat-item-minimal" role="group" aria-label="Oyuncu mertebesi">
                            <div class="stat-value-minimal level" id="playerLevel" aria-live="polite" aria-atomic="true">1. Mertebe</div>
                            <div class="stat-label-minimal">Mertebe</div>
                        </div>
                    </div>

                    <!-- Compact Daily Goal -->
                    <div class="daily-goal-minimal" role="region" aria-label="GÃ¼nlÃ¼k vird ilerlemesi">
                        <div class="goal-header-row">
                            <div class="goal-title-minimal-wrapper" onclick="showDailyGoalSettings()" title="GÃ¼nlÃ¼k vird ayarlarÄ±nÄ± aÃ§" role="button" aria-label="GÃ¼nlÃ¼k vird ayarlarÄ±nÄ± aÃ§" tabindex="0" onkeypress="if(event.key==='Enter'||event.key===' '){event.preventDefault();showDailyGoalSettings();}">
                                <span class="goal-title-minimal">ğŸ¯ GÃ¼nlÃ¼k Vird</span>
                                <span class="goal-settings-icon" aria-hidden="true">âš™ï¸</span>
                            </div>
                            <div class="goal-progress-minimal" id="dailyGoalProgressText">0 / 2,700</div>
                        </div>
                        <div class="progress-bar-minimal">
                            <div class="progress-fill-minimal" id="dailyGoalProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="GÃ¼nlÃ¼k vird ilerleme Ã§ubuÄŸu" style="width: 0%;"></div>
                        </div>
                        <div class="progress-text-minimal" style="display: none;">
                            <span id="dailyGoalText" style="font-weight: 700; color: white;">GÃ¼nlÃ¼k Vird: 2700 Hasene</span>
                        </div>
                    </div>

                    <!-- Quick Info Buttons -->
                    <div class="quick-info-minimal">
                        <button id="xpInfoBtn" class="info-btn-minimal" aria-label="Hasene puan sistemi hakkÄ±nda bilgi gÃ¶ster" role="button">
                            <span aria-hidden="true">ğŸ“¿</span> Hasene Bilgi
                        </button>
                        <button onclick="showStatsModal()" class="info-btn-minimal" aria-label="Ä°statistikler modalÄ±nÄ± aÃ§" role="button">
                            <span aria-hidden="true">ğŸ“Š</span> Ä°statistikler
                        </button>
                        <button onclick="showLeaderboard('weekly')" class="info-btn-minimal" aria-label="Liderlik tablosunu aÃ§" role="button">
                            <span aria-hidden="true">ğŸ†</span> Liderlik
                        </button>
                    </div>
                </div>
            </div>

            <!-- Zorluk SeÃ§ici - Kompakt -->
            <div class="difficulty-section difficulty-minimal" role="group" aria-label="Zorluk seviyesi seÃ§imi">
                <div class="difficulty-title-minimal">Zorluk Mertebesi</div>
                <div class="difficulty-buttons difficulty-buttons-minimal" role="radiogroup" aria-label="Zorluk seviyesi">
                    <button class="diff-btn kolay diff-btn-minimal" id="mainDiffKolay" aria-label="Kolay zorluk seviyesini seÃ§" role="radio" aria-checked="false"><span aria-hidden="true">ğŸŒ±</span> Kolay</button>
                    <button class="diff-btn orta active diff-btn-minimal" id="mainDiffOrta" aria-label="Orta zorluk seviyesini seÃ§" role="radio" aria-checked="true"><span aria-hidden="true">âš–ï¸</span> Orta</button>
                    <button class="diff-btn zor diff-btn-minimal" id="mainDiffZor" aria-label="Zor zorluk seviyesini seÃ§" role="radio" aria-checked="false"><span aria-hidden="true">ğŸ”¥</span> Zor</button>
                </div>
            </div>

            <!-- Ders TÃ¼rleri - Modern Grid -->
            <div class="games-section">
                <div class="section-title">ğŸ“š Ders TÃ¼rleri</div>
                <div class="games-grid">

                    <button class="game-card" id="kelimeCevirBtn" aria-label="Kelime Ã‡evir oyununu baÅŸlat - ArapÃ§a kelimelerin TÃ¼rkÃ§e MeÃ¢l karÅŸÄ±lÄ±ÄŸÄ±nÄ± bul" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">ğŸ”„</span>
                        <div class="game-title">Kelime Ã‡evir</div>
                        <div class="game-desc">ArapÃ§a kelimelerin TÃ¼rkÃ§e MeÃ¢l karÅŸÄ±lÄ±ÄŸÄ±nÄ± Bul</div>
                    </button>

                    <button class="game-card" id="dinleBulBtn" aria-label="Dinle ve Bul oyununu baÅŸlat - Kuran'da geÃ§en ArapÃ§a kelimeyi dinle ve sahih kelimeyi seÃ§" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">ğŸ§</span>
                        <div class="game-title">Dinle ve Bul</div>
                        <div class="game-desc">Kuran'da geÃ§en ArapÃ§a kelimeyi dinle ve sahih kelimeyi seÃ§</div>
                    </button>

                    <button class="game-card" id="boslukDoldurBtn" aria-label="BoÅŸluk Doldur oyununu baÅŸlat - Ayetteki eksik kelimeyi tamamla" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">âœï¸</span>
                        <div class="game-title">BoÅŸluk Doldur</div>
                        <div class="game-desc">Ayetteki eksik kelimeyi tamamla</div>
                    </button>

                    <button class="game-card" id="duaEtBtn" aria-label="Dua Et modunu aÃ§ - Kuran'da geÃ§en dualarÄ± dinle ve Ã¶ÄŸren" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">ğŸ¤²</span>
                        <div class="game-title">Dua Et</div>
                        <div class="game-desc">Kuran'da geÃ§en dualarÄ± dinle ve Ã¶ÄŸren</div>
                    </button>

                    <button class="game-card" id="ayetOkuBtn" aria-label="Ayet Oku modunu aÃ§ - Ayetin ArapÃ§a'sÄ±nÄ± oku ,dinle ve meÃ¢li idrak et" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">ğŸ“–</span>
                        <div class="game-title">Ayet Oku</div>
                        <div class="game-desc">Ayetin ArapÃ§a'sÄ±nÄ± oku ,dinle ve meÃ¢li idrak et</div>
                    </button>

                    <button class="game-card" id="hadisOkuBtn" aria-label="Hadis Oku modunu aÃ§ - Hadis-i ÅŸerifleri oku ve istifade et" role="button" tabindex="0">
                        <span class="game-icon" aria-hidden="true">ğŸ“š</span>
                        <div class="game-title">Hadis Oku</div>
                        <div class="game-desc">Hadis-i ÅŸerifleri oku ve istifade et</div>
                    </button>
                </div>
            </div>


            <!-- ğŸ” STREAK DEBUG PANEL (DEV MODE) -->
            
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                    
                
                   
                </div>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav id="bottomNavBar" class="bottom-nav" style="display: flex;" role="navigation" aria-label="Ana navigasyon menÃ¼sÃ¼">
            <button class="nav-item" onclick="goToMainMenu()" title="Ana MenÃ¼" aria-label="Ana menÃ¼ye dÃ¶n" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">ğŸ </span>
                <span class="nav-label">Ana MenÃ¼</span>
            </button>
            <button class="nav-item" onclick="showStatsModal()" title="Ä°statistikler" aria-label="Ä°statistikler modalÄ±nÄ± aÃ§" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">ğŸ“Š</span>
                <span class="nav-label">Ä°statistikler</span>
            </button>
            <button class="nav-item" onclick="showBadgesModal()" title="Muvaffakiyetler" aria-label="Muvaffakiyetler modalÄ±nÄ± aÃ§" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">ğŸ†</span>
                <span class="nav-label">Muvaffakiyetler</span>
            </button>
            <button class="nav-item" onclick="showCalendarModal()" title="Takvim" aria-label="Takvim modalÄ±nÄ± aÃ§" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">ğŸ“…</span>
                <span class="nav-label">Takvim</span>
            </button>
            <button class="nav-item" onclick="showDailyTasksModal()" title="GÃ¼nlÃ¼k Vazifeler" aria-label="GÃ¼nlÃ¼k vazifeler modalÄ±nÄ± aÃ§" role="button" tabindex="0">
                <span class="nav-icon" aria-hidden="true">ğŸ“‹</span>
                <span class="nav-label">Vazifeler</span>
                <span class="nav-badge" id="tasksBadge" style="display: none;">!</span>
            </button>
        </nav>

        <!-- Kelime Ã‡evir Alt Mod SeÃ§imi -->
        <div class="mode-selector" id="modeSelector" style="display: none;">
            <button class="back-btn" id="backToMenuBtn" style="margin: 6px 8px 4px 8px; padding: 4px 8px; font-size: 0.75em;">
                <i class="material-icons" style="font-size: 14px;">west</i>
                Geri
            </button>
            
            <div id="modeButtons"></div>
            
            <button class="start-btn" id="startBtn">Oyunu BaÅŸlat</button>
        </div>

        <!-- Ayet Okuma Modu -->
        <div class="ayet-mode" id="ayetMode" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromAyetBtn">â†</button>
            </div>
            <div class="ayet-card">
                <div class="sure-info" id="ayetSureInfo">YÃ¼kleniyor...</div>
                <div class="arabic" id="ayetArabic">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
                <div class="translation" id="ayetTranslation">YÃ¼kleniyor...</div>
                <button class="audio-btn" id="ayetAudioBtn" title="Ses Ã§al"></button>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevAyetBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextAyetBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- Dua Modu -->
        <div class="dua-mode" id="duaMode" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromDuaBtn">â†</button>
            </div>
            <div class="dua-card">
                <div class="sure-info" id="duaSureInfo">YÃ¼kleniyor...</div>
                <div class="arabic" id="duaArabic">ArapÃ§a Metin</div>
                <div class="translation" id="duaTranslation">AnlamÄ±</div>
                <button class="audio-btn" id="duaAudioBtn" title="Ses Ã§al"></button>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevDuaBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextDuaBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- Hadis Oku Modu -->
        <div class="hadis-mode" id="hadisMode" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromHadisBtn">â†</button>
            </div>
            <div class="hadis-card">
                <div class="hadis-category" id="hadisCategory">Kategori</div>
                <div class="hadis-title" id="hadisTitle">BaÅŸlÄ±k</div>
                <div class="hadis-header" id="hadisHeader">Ravi</div>
                <div class="hadis-text" id="hadisText">Hadis Metni</div>
                <div class="hadis-ref" id="hadisRef">Referans</div>
                <div class="navigation-btns">
                    <button class="nav-btn" id="prevHadisBtn">â† Ã–nceki</button>
                    <button class="nav-btn" id="nextHadisBtn">Sonraki â†’</button>
                </div>
            </div>
        </div>

        <!-- BoÅŸluk Doldur Modu - Duolingo TarzÄ± -->
        <div class="bosluk-mode" id="boslukMode" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromBoslukBtn">â†</button>
                <div class="score-display" id="boslukHeaderScore" style="margin-left: auto;">â­ 0</div>
            </div>

            <!-- Modern Question Area -->
            <div class="duolingo-question-area">
                <div class="duolingo-question-number" id="boslukQuestionNumber">Sual 1 / 10</div>
                <div class="question-icon">âœï¸</div>
                <div class="arabic" id="boslukAyetText" style="color: #1a1a1a; margin: 20px 0; font-size: clamp(24px, 5vw, 36px); text-align: center; word-break: break-word; overflow-wrap: break-word; max-width: 100%; box-sizing: border-box; direction: rtl; line-height: 1.8;">Ayet metni yÃ¼kleniyor...</div>
                <div class="duolingo-question-hint" id="boslukQuestionHint" style="color: #999; font-size: 13px; margin-top: 10px; font-style: italic;">Eksik kelimeyi seÃ§</div>
                <div class="sure-info" id="boslukSureInfo" style="font-size: 12px; color: #999; margin-top: 8px; display: none;">ID: 0</div>
                
                <div class="duolingo-audio-buttons">
                    <button class="duolingo-audio-btn" id="boslukAudioBtn" title="Sesi Ã§al" aria-label="Ayet sesini Ã§al">
                        <img src="assets/images/hoparlor.webp" alt="Ses" loading="lazy" width="24" height="24" onerror="this.onerror=null; this.src='assets/images/hoparlor.png';">
                    </button>
                </div>
                </div>

            <!-- Duolingo TarzÄ± SeÃ§enekler -->
            <div class="duolingo-options-container">
                <div id="boslukOptions" style="display: flex; flex-direction: column; gap: 0;">
                    <!-- SeÃ§enekler buraya dinamik eklenecek -->
                </div>
                <div class="feedback" id="boslukFeedback" style="font-size: 16px; margin: 16px 0 8px 0; text-align: center; min-height: 24px; color: #666;"></div>
                <button class="flutter-btn flutter-btn-primary" id="boslukNextBtn" style="width: 100%; margin-top: 8px; display: none; min-height: 50px; font-size: 16px; font-weight: 600; border-radius: 16px; border: none; background: #58cc02; color: #fff; cursor: pointer; transition: all 0.2s;" aria-label="Sonraki suale geÃ§" onmouseover="this.style.background='#4fb802'" onmouseout="this.style.background='#58cc02'">Sonraki Sual â†’</button>
            </div>

            <!-- Duolingo TarzÄ± Ä°statistikler -->
            <div class="duolingo-stats-bar">
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value hasene" id="boslukScore">0</div>
                    <div class="duolingo-stat-label">Hasene</div>
                </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value correct" id="boslukCorrect">0</div>
                    <div class="duolingo-stat-label">Sahih</div>
                </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value wrong" id="boslukWrong">0</div>
                    <div class="duolingo-stat-label">HatalÄ±</div>
                </div>
            </div>
        </div>

        <!-- Dinle ve Bul Modu - Duolingo TarzÄ± -->
        <div class="dinle-mode" id="dinleMode" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromDinleBtn">â†</button>
                <div class="score-display" id="dinleHeaderScore" style="margin-left: auto;">â­ 0</div>
            </div>

            <!-- Modern Question Area -->
            <div class="duolingo-question-area">
                <div class="duolingo-question-number" id="dinleQuestionNumber">Sual 1 / 10</div>
                <div class="question-icon">ğŸ§</div>
                <div class="duolingo-question-hint" id="dinleQuestionHint" style="color: #999; font-size: 13px; margin-top: 10px; font-style: italic;">Kuran'da geÃ§en ArapÃ§a kelimeyi dinle ve sahih kelimeyi seÃ§</div>
                <div class="sure-info" id="dinleSureInfo" style="font-size: 12px; color: #999; margin-top: 8px; display: none;">ID: 0</div>
                
                <div class="duolingo-audio-buttons">
                    <button class="duolingo-audio-btn" id="dinleAudioBtn" title="Sesi tekrar Ã§al" aria-label="Kelime sesini tekrar Ã§al">
                        <img src="assets/images/hoparlor.webp" alt="Ses" loading="lazy" width="24" height="24" onerror="this.onerror=null; this.src='assets/images/hoparlor.png';">
                    </button>
                    <button class="duolingo-audio-btn" id="dinleMicBtn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: 2px solid #667eea;" title="Ses tanÄ±ma ile cevap ver">
                        <span style="font-size: 1.5em;">ğŸ¤</span>
                    </button>
                </div>
                <div id="speechStatus" style="text-align: center; font-size: 0.85em; color: #666; margin-top: 12px; min-height: 20px;"></div>
            </div>

            <!-- Duolingo TarzÄ± SeÃ§enekler -->
            <div class="duolingo-options-container">
                <div id="dinleOptions" style="display: flex; flex-direction: column; gap: 0;">
                    <!-- SeÃ§enekler buraya dinamik eklenecek -->
                </div>
                <div class="feedback" id="dinleFeedback" style="font-size: 16px; margin: 16px 0 8px 0; text-align: center; min-height: 24px; color: #666;"></div>
                <button class="flutter-btn flutter-btn-primary" id="dinleNextBtn" style="width: 100%; margin-top: 8px; display: none; min-height: 50px; font-size: 16px; font-weight: 600; border-radius: 16px; border: none; background: #58cc02; color: #fff; cursor: pointer; transition: all 0.2s;" aria-label="Sonraki suale geÃ§" onmouseover="this.style.background='#4fb802'" onmouseout="this.style.background='#58cc02'">Sonraki Sual â†’</button>
        </div>

            <!-- Duolingo TarzÄ± Ä°statistikler -->
            <div class="duolingo-stats-bar">
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value hasene" id="dinleScore">0</div>
                    <div class="duolingo-stat-label">Hasene</div>
                </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value correct" id="dinleCorrect">0</div>
                    <div class="duolingo-stat-label">Sahih</div>
                </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value wrong" id="dinleWrong">0</div>
                    <div class="duolingo-stat-label">HatalÄ±</div>
                </div>
            </div>
        </div>

        <!-- Oyun EkranÄ± - Duolingo TarzÄ± -->
        <div class="game-screen" id="gameScreen" style="display: none;">
            <!-- Modern Header -->
            <div class="duolingo-header">
                <button class="duolingo-back-btn" id="backFromGameBtn">â†</button>
                <div class="score-display" id="headerScore" style="margin-left: auto;">â­ 0</div>
            </div>

            <!-- Modern Question Area -->
            <div class="duolingo-question-area">
                <div class="duolingo-question-number" id="duolingoQuestionNumber">Sual 1 / 10</div>
                <div class="question-icon">ğŸ”„</div>
                <div class="arabic-text arabic-large" id="arabicWord" style="color: #1a1a1a; margin: 20px 0; font-size: clamp(28px, 6vw, 42px); text-align: center; word-break: break-word; overflow-wrap: break-word; max-width: 100%; box-sizing: border-box; direction: rtl; line-height: 1.6;">
                    ÙÙÙƒÙØ¨Ù’ÙƒÙØ¨ÙÙˆØ§ÛŸ
                </div>
                <div class="duolingo-question-hint" id="duolingoQuestionHint" style="color: #999; font-size: 13px; margin-top: 10px; font-style: italic;">Bu kelimenin TÃ¼rkÃ§e karÅŸÄ±lÄ±ÄŸÄ± nedir?</div>
                <div class="sure-info" id="sureInfo" style="font-size: 12px; color: #999; margin-top: 8px; display: none;">ID: 26:94:1 | Zorluk: 13</div>
                
                <div class="duolingo-audio-buttons" style="margin-top: 20px;">
                    <button class="duolingo-audio-btn" id="audioBtn" aria-label="Kelime sesini Ã§al">
                        <img src="assets/images/hoparlor.webp" alt="Ses" loading="lazy" width="24" height="24" onerror="this.onerror=null; this.src='assets/images/hoparlor.png';">
                    </button>
                    <button class="duolingo-audio-btn" id="hintBtn">
                        <img src="assets/images/clue.png" alt="Ä°pucu">
                    </button>
                </div>
            </div>

            <!-- Duolingo TarzÄ± SeÃ§enekler -->
            <div class="duolingo-options-container">
                <div id="options" style="display: flex; flex-direction: column; gap: 0;">
                    <!-- SeÃ§enekler buraya dinamik eklenecek -->
            </div>
                <div class="feedback" id="feedback" style="font-size: 16px; margin: 16px 0 8px 0; text-align: center; min-height: 24px; color: #666;"></div>
                <button class="flutter-btn flutter-btn-primary" id="nextBtn" style="width: 100%; margin-top: 8px; display: none; min-height: 50px; font-size: 16px; font-weight: 600; border-radius: 16px; border: none; background: #58cc02; color: #fff; cursor: pointer; transition: all 0.2s;" aria-label="Sonraki suale geÃ§" onmouseover="this.style.background='#4fb802'" onmouseout="this.style.background='#58cc02'">Sonraki Sual â†’</button>
        </div>

            <!-- Combo Indicator -->
            <div id="comboIndicator" style="display: none; text-align: center; padding: 10px 16px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin: 0 20px 12px 20px; border-radius: 10px; animation: comboPopIn 0.3s ease; box-shadow: 0 4px 15px rgba(245,87,108,0.4);">
                <div style="font-size: 14px; font-weight: bold; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    ğŸ”¥ Muvazebet <span id="comboCount">3</span>x ğŸ”¥
            </div>
                <div style="font-size: 12px; color: rgba(255,255,255,0.9); margin-top: 3px;">
                    +<span id="comboBonus">5</span> Ä°hsan Hasene!
            </div>
        </div>

            <!-- Duolingo TarzÄ± Ä°statistikler -->
            <div class="duolingo-stats-bar">
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value hasene" id="score">0</div>
                    <div class="duolingo-stat-label">Hasene</div>
    </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value correct" id="correct">0</div>
                    <div class="duolingo-stat-label">Sahih</div>
    </div>
                <div class="duolingo-stat-item">
                    <div class="duolingo-stat-value wrong" id="wrong">0</div>
                    <div class="duolingo-stat-label">HatalÄ±</div>
    </div>
</div>
        </div>  <!-- gameScreen sonu -->
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2>ğŸ‰ Tebrikler!</h2>
            <p><span id="newLevel"></span>. Mertebeye yÃ¼kseldiniz!</p>
            <p style="font-size: 0.9em; color: #666; margin-top: 10px;">
                Toplam Haseneleriniz: <strong id="modalTotalPoints">0</strong><br>
                Bir sonraki mertebe iÃ§in: <strong id="modalNextLevelPoints">0</strong> hasene gerekli
            </p>
            <button class="modal-btn" id="modalBtn">Devam Et</button>
        </div>
    </div>

    <!-- Muvaffakiyetler/NiÅŸanlar Modal - Yeni Modern TasarÄ±m -->
    <div class="modal" id="badgesModal" onclick="handleBadgesModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="badgesModalTitle" aria-label="Muvaffakiyetler modalÄ±">
        <div class="modal-content badges-container" style="max-width: 500px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; padding: 0; touch-action: pan-y;">
            <!-- Header -->
            <div class="badges-header">
                <h2>ğŸ† Muvaffakiyetler</h2>
                <button id="closeBadgesBtn" class="close-btn" onclick="event.stopPropagation(); closeBadgesModal();">Ã—</button>
            </div>

            <!-- Stats Summary -->
            <div class="stats-summary">
                <div class="stat-item">
                    <div class="stat-value" id="badgesUnlockedCount">0</div>
                    <div class="stat-label">AÃ§Ä±lan</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="badgesTotalCount">20</div>
                    <div class="stat-label">Toplam</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="badgesProgressPercent">0%</div>
                    <div class="stat-label">Terakki</div>
                </div>
            </div>

            <!-- Category Tabs -->
            <div class="category-tabs">
                <button class="category-tab active" data-category="daily">ğŸ“… GÃ¼nlÃ¼k</button>
                <button class="category-tab" data-category="special">â­ Ã–zel</button>
                <button class="category-tab" data-category="streak">ğŸ”¥ Seri</button>
                <button class="category-tab" data-category="level">ğŸ… Mertebe</button>
            </div>

            <!-- Badges Content -->
            <div class="badges-content" id="badgesScrollableContent" style="flex: 1; overflow-y: auto; overflow-x: hidden; min-height: 0; padding: 0 20px 20px; -webkit-overflow-scrolling: touch; overscroll-behavior: contain; will-change: scroll-position;">
                <div id="badgesGrid" class="badges-grid">
                    <!-- GÃ¼nlÃ¼k BaÅŸarÄ±lar -->
                    <div class="badge-card" id="achievement-first_win" data-category="daily" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ¯</span>
                        <div class="badge-title">Ä°lk Zafer</div>
                        <div class="badge-desc">Ä°lk sahih cevabÄ±n</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">Kilitli</div>
                    </div>

                    <div class="badge-card" id="achievement-daily_goal" data-category="daily" onclick="event.stopPropagation();">
                        <span class="badge-icon">â­</span>
                        <div class="badge-title">GÃ¼nlÃ¼k Kahraman</div>
                        <div class="badge-desc">GÃ¼nlÃ¼k virdi tamamla</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">Kilitli</div>
                    </div>

                    <!-- Ã–zel BaÅŸarÄ±lar -->
                    <div class="badge-card" id="achievement-combo_master" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ”¥</span>
                        <div class="badge-title">Muvazebet UstasÄ±</div>
                        <div class="badge-desc">5x muvazebet yap</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/5</div>
                    </div>

                    <div class="badge-card" id="achievement-xp_500" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸŒ±</span>
                        <div class="badge-title">Ä°lk AdÄ±m</div>
                        <div class="badge-desc">500 Hasene topla</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/500</div>
                    </div>

                    <div class="badge-card" id="achievement-xp_2000" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ¥‰</span>
                        <div class="badge-title">MÃ¼btedi Yolcu</div>
                        <div class="badge-desc">2,000 Hasene</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/2000</div>
                    </div>

                    <div class="badge-card" id="achievement-xp_8500" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ¥ˆ</span>
                        <div class="badge-title">GÃ¼mÃ¼ÅŸ UstasÄ±</div>
                        <div class="badge-desc">8,500 Hasene</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/8500</div>
                    </div>

                    <div class="badge-card" id="achievement-xp_25500" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ¥‡</span>
                        <div class="badge-title">AltÄ±n UstasÄ±</div>
                        <div class="badge-desc">25,500 Hasene</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/25500</div>
                    </div>

                    <div class="badge-card" id="achievement-xp_85000" data-category="special" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ’</span>
                        <div class="badge-title">Elmas UstasÄ±</div>
                        <div class="badge-desc">85,000 Hasene</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/85000</div>
                    </div>

                    <!-- Seri BaÅŸarÄ±lar -->
                    <div class="badge-card" id="achievement-streak_7" data-category="streak" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ”¥</span>
                        <div class="badge-title">7 GÃ¼n Muvazebet</div>
                        <div class="badge-desc">7 gÃ¼n Ã¼st Ã¼ste talebe et</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/7</div>
                    </div>

                    <!-- Mertebe BaÅŸarÄ±lar -->
                    <div class="badge-card" id="achievement-level_5" data-category="level" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ†</span>
                        <div class="badge-title">Mertebe 5</div>
                        <div class="badge-desc">Mertebe 5'e ulaÅŸ</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/5</div>
                    </div>

                    <div class="badge-card" id="achievement-level_10" data-category="level" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸ’</span>
                        <div class="badge-title">Mertebe 10</div>
                        <div class="badge-desc">Mertebe 10'a ulaÅŸ</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/10</div>
                    </div>

                    <div class="badge-card" id="achievement-level_20" data-category="level" onclick="event.stopPropagation();">
                        <span class="badge-icon">ğŸŒŸ</span>
                        <div class="badge-title">Mertebe 20</div>
                        <div class="badge-desc">Mertebe 20'ye ulaÅŸ</div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: 0%;"></div>
                        </div>
                        <div class="badge-status">0/20</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Takvim Modal - Duolingo Style -->
    <div class="modal" id="calendarModal" onclick="handleCalendarModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="calendarModalTitle" aria-label="Takvim modalÄ±">
        <div class="modal-content calendar-content" style="max-width: 500px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; padding: 24px; border-radius: 16px; touch-action: pan-y;">
            <!-- BaÅŸlÄ±k ve Kapat Butonu -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h3 style="margin: 0; font-size: 1.2em; font-weight: 700; color: #58cc02;">ğŸ“… Takvim</h3>
                <button id="closeCalendarBtn" class="modal-close-btn" onclick="event.stopPropagation(); closeCalendarModal();">Ã—</button>
            </div>
            
            <!-- Scroll Edilebilir Ä°Ã§erik -->
            <div id="calendarScrollableContent" style="flex: 1; overflow-y: auto; overflow-x: hidden; min-height: 0; padding-right: 4px; margin-bottom: 12px; -webkit-overflow-scrolling: touch;">
                
                <!-- Streak Bilgisi - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #58cc02 0%, #4db300 100%); color: white; padding: 20px; border-radius: 16px; margin-bottom: 24px; text-align: center; box-shadow: 0 4px 12px rgba(88,204,2,0.3);">
                    <h3 style="font-size: 16px; margin-bottom: 12px; opacity: 0.9; font-weight: 600;">ğŸ”¥ Seri Bilgisi</h3>
                    <div style="font-size: 36px; font-weight: 700; margin-bottom: 8px;">
                        <span id="calendarStreakCount" style="color: white;">0</span> gÃ¼n seri
                    </div>
                    <div style="font-size: 14px; opacity: 0.9; font-weight: 500;">
                        Her gÃ¼n talebe et, serini bozma!
                    </div>
                </div>
            
                <!-- HaftalÄ±k Streak GÃ¶sterimi (Duolingo Style) - Modern TasarÄ±m -->
                <div id="weeklyStreakDisplay" style="margin-bottom: 24px; padding: 20px; background: linear-gradient(135deg, #f7f7f7 0%, #e9ecef 100%); border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                <!-- Bu alan JavaScript ile doldurulacak -->
            </div>
            
                <!-- AylÄ±k Takvim BÃ¶lÃ¼mÃ¼ (Duolingo Style) - Modern TasarÄ±m -->
                <div style="margin-bottom: 24px; padding: 20px; background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%); border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <!-- Ay BaÅŸlÄ±ÄŸÄ± -->
                    <div style="text-align: center; font-weight: 600; font-size: 18px; color: #1a1a1a; margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid #e0e0e0;" id="calendarMonth">
                        Ocak 2025
                    </div>
                    
                    <!-- Takvim Grid -->
                    <div id="calendarGrid" style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; max-width: 100%; margin: 0 auto;">
                        <!-- Takvim gÃ¼nleri buraya eklenecek -->
                    </div>
                    </div>
                    
                        </div>
            <!-- Scroll Edilebilir Ä°Ã§erik Sonu -->

                    </div>
                </div>
            </div>

    <!-- GÃ¼nlÃ¼k GÃ¶revler Modal - Modern TasarÄ±m -->
    <div class="modal" id="dailyTasksModal" onclick="handleDailyTasksModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="dailyTasksModalTitle" aria-label="GÃ¼nlÃ¼k vazifeler modalÄ±">
        <div class="modal-content daily-tasks-content" style="max-width: 500px; max-height: 95vh; height: auto; overflow: hidden; display: flex; flex-direction: column; padding: 0; touch-action: pan-y; box-sizing: border-box; border-radius: 24px;">
            <!-- Scroll Edilebilir Ä°Ã§erik -->
            <div id="dailyTasksScrollableContent" class="daily-tasks-content-scrollable" style="flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; min-height: 0; max-height: 100%; padding-right: 4px; margin-bottom: 12px; -webkit-overflow-scrolling: touch; touch-action: pan-y;">
                <!-- Header -->
                <div class="daily-tasks-header" style="position: sticky; top: 0; z-index: 5; background: linear-gradient(135deg, #ffffff 0%, #f7f9fc 100%); display: flex; align-items: center; justify-content: space-between; padding: 20px; border-bottom: 1px solid #f0f0f0;">
                    <div class="daily-tasks-title" style="display: flex; align-items: center; gap: 10px; font-weight: 700; font-size: 1.05em; color: #1f2937;">
                        <span>ğŸ¯</span>
                        <span>GÃ¼nlÃ¼k Vazifeler</span>
                    </div>
                    <button class="daily-tasks-close-btn modal-close-btn" onclick="event.stopPropagation(); closeDailyTasksModal();" style="flex-shrink: 0;">Ã—</button>
                </div>

            <!-- Progress Card -->
            <div class="daily-tasks-progress-card">
                <div class="daily-tasks-progress-title">ğŸ“Š BugÃ¼nkÃ¼ Terakki</div>
                <div class="daily-tasks-progress-stats">
                    <div class="daily-tasks-progress-count" id="completedTasks">0</div>
                    <div class="daily-tasks-progress-total">/ <span id="totalTasks">11</span> Vazife</div>
                </div>
                <div class="daily-tasks-progress-bar-container">
                    <div class="daily-tasks-progress-bar" id="taskProgress" style="width: 0%;"></div>
                </div>
            </div>

            <!-- Temel GÃ¶revler -->
            <div class="daily-tasks-section">
                <div class="daily-tasks-section-title">
                    <span>ğŸ“‹</span>
                    <span>Temel Vazifeler</span>
                </div>
                <div id="dailyTasksList" class="daily-tasks-list">
                    <!-- GÃ¶revler buraya dinamik eklenecek -->
                </div>
            </div>

            <!-- Bonus GÃ¶revler -->
            <div class="daily-tasks-section">
                <div class="daily-tasks-section-title bonus">
                    <span>â­</span>
                    <span>Fazilet Vazifeleri</span>
                </div>
                <div id="bonusTasksList" class="daily-tasks-list">
                    <!-- Fazilet vazifeleri buraya dinamik eklenecek -->
                </div>
            </div>

            <!-- Ã–dÃ¼l BÃ¶lÃ¼mÃ¼ -->
            <div id="rewardsSection" class="daily-tasks-reward-section" style="display: none;">
                <div class="daily-tasks-reward-icon">ğŸ‰</div>
                <div class="daily-tasks-reward-title">Tebrikler!</div>
                <div class="daily-tasks-reward-desc">TÃ¼m gÃ¶revleri tamamladÄ±n!</div>
                <button id="claimRewardsBtn" class="daily-tasks-reward-btn" onclick="claimDailyRewards()">
                    +2,500 Hasene Ã–dÃ¼l Topla ğŸ
                </button>
            </div>

            </div>
        </div>
    </div>

    <!-- Ä°statistikler Modal -->
    <div class="modal" id="statsModal" onclick="handleStatsModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="statsModalTitle" aria-label="Ä°statistikler modalÄ±">
        <div class="modal-content stats-content" style="max-width: 500px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; padding: 16px; touch-action: pan-y; box-sizing: border-box;">
            <!-- BaÅŸlÄ±k ve Kapat Butonu -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-shrink: 0;">
                <h3 style="margin: 0; font-size: 1.1em; font-weight: 700; color: #667eea;">ğŸ“Š Ä°statistikler</h3>
                <div style="display: flex; gap: 8px; align-items: center;">
                    <button id="detailedStatsBtn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; padding: 6px 12px; font-size: 11px; font-weight: 600; cursor: pointer; transition: all 0.2s; touch-action: manipulation; -webkit-tap-highlight-color: transparent; position: relative; z-index: 10;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'" title="DetaylÄ± Ä°statistikler">
                        ğŸ“ˆ DetaylÄ±
                    </button>
                    <button id="closeStatsBtn" class="modal-close-btn" onclick="event.stopPropagation(); closeStatsModal();">Ã—</button>
                </div>
            </div>

            <!-- Scroll Edilebilir Ä°Ã§erik -->
            <div id="statsScrollableContent" style="flex: 1 1 auto; overflow-y: auto; overflow-x: hidden; min-height: 0; max-height: 100%; padding-right: 4px; margin-bottom: 12px; -webkit-overflow-scrolling: touch; touch-action: pan-y;">
                
                <!-- Mertebe Terakki BarÄ± - Modern -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 14px; border-radius: 12px; margin-bottom: 14px; text-align: center; box-shadow: 0 4px 12px rgba(102,126,234,0.3);">
                <h3 style="font-size: 14px; margin-bottom: 12px; opacity: 0.9; font-weight: 600;">ğŸ“ˆ Mertebe Terakkisi</h3>
                    <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 6px; opacity: 0.9; font-weight: 600;">
                        <span>Mertebe <span id="statsCurrentLevel">1</span></span>
                        <span>Mertebe <span id="statsNextLevel">2</span></span>
                    </div>
                    <div style="background: rgba(255,255,255,0.2); height: 8px; border-radius: 8px; overflow: hidden; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);">
                        <div id="statsLevelProgress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Mertebe ilerleme Ã§ubuÄŸu" style="background: rgba(255,255,255,0.95); height: 100%; width: 0%; border-radius: 8px; transition: width 0.5s ease; box-shadow: 0 2px 8px rgba(255,255,255,0.5);"></div>
                    </div>
                    <div style="font-size: 11px; margin-top: 6px; opacity: 0.9; font-weight: 500;">
                        <span id="statsLevelPointsNeeded">0</span> hasene daha
                </div>
            </div>

            <!-- Rozet Sistemi - Modern TasarÄ±m -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; box-shadow: 0 4px 12px rgba(102,126,234,0.3);">
                <h4 style="margin: 0 0 12px 0; color: white; font-size: 14px; text-align: center; font-weight: 600;">ğŸ† Hasene BazlÄ± NiÅŸan Sistemi</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; text-align: center;">
                    <div style="padding: 10px 6px; background: white; border-radius: 10px; border: 3px solid #cd7f32; box-shadow: 0 2px 8px rgba(205,127,50,0.2); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥‰</div>
                        <div style="font-size: 11px; color: #666; margin: 4px 0; font-weight: 600;">Bronz</div>
                        <div style="font-weight: bold; font-size: 16px; color: #cd7f32; margin: 4px 0;" id="statsBronze">0</div>
                        <div style="font-size: 9px; color: #888; margin-top: 4px;">2K Hasene</div>
                    </div>
                    <div style="padding: 10px 6px; background: white; border-radius: 10px; border: 3px solid #c0c0c0; box-shadow: 0 2px 8px rgba(192,192,192,0.2); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥ˆ</div>
                        <div style="font-size: 11px; color: #666; margin: 4px 0; font-weight: 600;">GÃ¼mÃ¼ÅŸ</div>
                        <div style="font-weight: bold; font-size: 16px; color: #c0c0c0; margin: 4px 0;" id="statsSilver">0</div>
                        <div style="font-size: 9px; color: #888; margin-top: 4px;">8.5K Hasene</div>
                    </div>
                    <div style="padding: 10px 6px; background: white; border-radius: 10px; border: 3px solid #ffd700; box-shadow: 0 2px 8px rgba(255,215,0,0.2); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥‡</div>
                        <div style="font-size: 11px; color: #666; margin: 4px 0; font-weight: 600;">AltÄ±n</div>
                        <div style="font-weight: bold; font-size: 16px; color: #ffd700; margin: 4px 0;" id="statsGold">0</div>
                        <div style="font-size: 9px; color: #888; margin-top: 4px;">25.5K Hasene</div>
                    </div>
                    <div style="padding: 10px 6px; background: white; border-radius: 10px; border: 3px solid #b9f2ff; box-shadow: 0 2px 8px rgba(185,242,255,0.2); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ’</div>
                        <div style="font-size: 11px; color: #666; margin: 4px 0; font-weight: 600;">Elmas</div>
                        <div style="font-weight: bold; font-size: 16px; color: #00d9ff; margin: 4px 0;" id="statsDiamond">0</div>
                        <div style="font-size: 9px; color: #888; margin-top: 4px;">85K Hasene</div>
                    </div>
                </div>
                <div style="margin-top: 12px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 10px; color: white; font-size: 11px; text-align: center; font-weight: 500;">
                    ğŸ’¡ 1 saat oyun = ~8500 Hasene (1 MÃ¼terakki)
                </div>
            </div>

            <!-- BaÅŸarÄ± Analizi - Modern TasarÄ±m -->
            <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #2980b9; box-shadow: 0 2px 8px rgba(41,128,185,0.1);">
                <h4 style="margin: 0 0 10px 0; color: #2980b9; font-size: 14px; font-weight: 600;">ğŸ“ˆ Muvaffakiyet Analizi</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #27ae60; margin-bottom: 4px;" id="statsSuccessRate">0%</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Muvaffakiyet OranÄ±</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #3498db; margin-bottom: 4px;" id="statsAvgPointsPerDay">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">GÃ¼nlÃ¼k Ort. Hasene</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #e67e22; margin-bottom: 4px;" id="statsPlayConsistency">0%</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Talim TutarlÄ±lÄ±ÄŸÄ±</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #9b59b6; margin-bottom: 4px;" id="statsLevelProgressText">0%</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Mertebe Terakkisi</div>
                    </div>
                </div>
            </div>

            <!-- Devam (Streak) Bilgileri - Modern TasarÄ±m -->
            <div style="background: linear-gradient(135deg, #fff7e6 0%, #ffe6d9 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #d68910; box-shadow: 0 2px 8px rgba(214,137,16,0.1);">
                <h4 style="margin: 0 0 10px 0; color: #d68910; font-size: 14px; font-weight: 600;">ğŸ”¥ Muvazebet Ä°statistikleri</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 24px; font-weight: bold; color: #e67e22; margin-bottom: 4px;" id="statsCurrentStreak">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Mevcut Devam</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 24px; font-weight: bold; color: #e67e22; margin-bottom: 4px;" id="statsBestStreak">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">En Ä°yi Devam</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 24px; font-weight: bold; color: #27ae60; margin-bottom: 4px;" id="statsTotalDays">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Toplam Amel GÃ¼nÃ¼</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 24px; font-weight: bold; color: #3498db; margin-bottom: 4px;" id="statsTodayProgress">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">BugÃ¼nkÃ¼ Amel</div>
                    </div>
                </div>
            </div>

            <!-- Oyun TÃ¼rÃ¼ Ä°statistikleri - Modern TasarÄ±m -->
            <div style="background: linear-gradient(135deg, #f0fff4 0%, #e6ffe6 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #27ae60; box-shadow: 0 2px 8px rgba(39,174,96,0.1);">
                <h4 style="margin: 0 0 10px 0; color: #27ae60; font-size: 14px; font-weight: 600;">ğŸ® Oyun TÃ¼rÃ¼ Ä°statistikleri (BugÃ¼n)</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ“š Kelime Ã‡evir:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsKelimeCevir">0</strong>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ§ Dinle & Bul:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsDinleBul">0</strong>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ“ BoÅŸluk Doldur:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsBoslukDoldur">0</strong>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ“– Ayet Oku:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsAyetOku">0</strong>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ¤² Dua Ã–ÄŸren:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsDuaOgre">0</strong>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                        <span style="font-size: 13px; font-weight: 500; color: #333;">ğŸ“œ Hadis Oku:</span>
                        <strong style="font-size: 16px; color: #27ae60;" id="statsHadisOku">0</strong>
                    </div>
                </div>
            </div>

            <!-- BugÃ¼nkÃ¼ Toplam Ä°statistikler - Modern TasarÄ±m -->
            <div style="background: linear-gradient(135deg, #fef9e7 0%, #ffe6d9 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #b7950b; box-shadow: 0 2px 8px rgba(183,149,11,0.1);">
                <h4 style="margin: 0 0 10px 0; color: #b7950b; font-size: 14px; font-weight: 600;">âš¡ BugÃ¼nkÃ¼ Amel</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #27ae60; margin-bottom: 4px;" id="statsTodayCorrect">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Toplam Sahih</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #f39c12; margin-bottom: 4px;" id="statsTodayPoints">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">Toplam Hasene</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #e74c3c; margin-bottom: 4px;" id="statsPerfectStreak">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">MÃ¼kemmel Seri</div>
                    </div>
                    <div style="text-align: center; padding: 10px; background: white; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                        <div style="font-size: 20px; font-weight: bold; color: #8e44ad; margin-bottom: 4px;" id="statsDifficultyCount">0</div>
                        <div style="font-size: 11px; color: #666; font-weight: 500;">FarklÄ± Zorluk</div>
                    </div>
                </div>
            </div>

            <!-- Kelime Ä°statistikleri BÃ¶lÃ¼mÃ¼ -->
            <div style="margin-top: 14px; padding-top: 14px; border-top: 2px solid #e0e0e0;">
            <!-- Genel Ã–zet -->
            <div style="background: linear-gradient(135deg, #845EC2 0%, #4E8397 100%); color: white; padding: 12px; border-radius: 12px; margin: 12px 0; text-align: center;">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; text-align: center;">
                    <div>
                        <div style="font-size: 1.2em; font-weight: bold;" id="wordStatsTotal">0</div>
                        <div style="font-size: 0.75em; opacity: 0.9;">Kelime GÃ¶rÃ¼ldÃ¼</div>
                    </div>
                    <div>
                        <div style="font-size: 1.2em; font-weight: bold;" id="wordStatsMastered">0</div>
                        <div style="font-size: 0.75em; opacity: 0.9;">Ã–ÄŸrenildi</div>
                    </div>
                    <div>
                        <div style="font-size: 1.2em; font-weight: bold;" id="wordStatsStruggling">0</div>
                        <div style="font-size: 0.75em; opacity: 0.9;">ZorlanÄ±lan</div>
                    </div>
                </div>
            </div>

            <!-- Filtreleme ButonlarÄ± -->
            <div style="display: flex; gap: 8px; margin: 15px 0; flex-wrap: wrap;">
                <button id="filterAll" class="filter-btn active" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #2980b9; color: white; font-size: 0.85em; cursor: pointer;">
                    Hepsi
                </button>
                <button id="filterFavorites" class="filter-btn" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #95a5a6; color: white; font-size: 0.85em; cursor: pointer;">
                    â­ Favoriler
                </button>
                <button id="filterReview" class="filter-btn" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #95a5a6; color: white; font-size: 0.85em; cursor: pointer;">
                    ğŸ”„ Tekrar
                </button>
                <button id="filterMastered" class="filter-btn" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #95a5a6; color: white; font-size: 0.85em; cursor: pointer;">
                    Ã–ÄŸrenildi
                </button>
                <button id="filterStruggling" class="filter-btn" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #95a5a6; color: white; font-size: 0.85em; cursor: pointer;">
                    ZorlanÄ±lan
                </button>
                <button id="filterRecent" class="filter-btn" style="flex: 1; min-width: 80px; padding: 8px; border: none; border-radius: 6px; background: #95a5a6; color: white; font-size: 0.85em; cursor: pointer;">
                    Son GÃ¶rÃ¼len
                </button>
            </div>

            <!-- Kelime Listesi -->
            <div id="wordStatsList" style="max-height: 400px; overflow-y: auto; margin: 15px 0;">
                <!-- Kelime istatistikleri buraya dinamik eklenecek -->
            </div>

            <!-- Ã–ÄŸrenme Ä°puÃ§larÄ± -->
            <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #f39c12;">
                <div style="font-size: 0.9em; color: #856404; font-weight: bold; margin-bottom: 6px;">ğŸ’¡ Ã–ÄŸrenme Ä°puÃ§larÄ±</div>
                <div style="font-size: 0.8em; color: #666; line-height: 1.6;">
                    <strong>ğŸ“š Hepsi Sekmesi:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>toplam Ã§alÄ±ÅŸtÄ±ÄŸÄ±n kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ TÃ¼m kelimeler ayrÄ± kartlar olarak listelenir<br>
                    â€¢ Her kelimenin istatistikleri (doÄŸru, yanlÄ±ÅŸ, baÅŸarÄ± oranÄ±, ustalÄ±k) gÃ¶sterilir<br><br>
                    
                    <strong>â­ Favoriler Sekmesi:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>favori kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ Her kelime ayrÄ± bir kart olarak listelenir<br>
                    â€¢ Kelime kartlarÄ±ndaki â­ butonuna tÄ±klayarak favorilere ekleyebilirsin<br>
                    â€¢ Favoriler, son gÃ¶rÃ¼lme zamanÄ±na gÃ¶re sÄ±ralanÄ±r<br><br>
                    
                    <strong>ğŸ”„ Tekrar Kelimeleri:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>tekrar gerektiren FARKLI kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ Her kelime ayrÄ± bir kart olarak listelenir<br>
                    â€¢ BaÅŸarÄ± oranÄ± %60'Ä±n altÄ±nda olan kelimeler<br>
                    â€¢ UstalÄ±k seviyesi 2.0'Ä±n altÄ±nda olan kelimeler<br>
                    â€¢ 3 gÃ¼nden fazla gÃ¶rÃ¼lmeyen kelimeler<br>
                    â€¢ Toplam 5'ten az deneme yapÄ±lan kelimeler<br>
                    â€¢ <strong>Ã–rnek:</strong> 3 farklÄ± kelimeye yanlÄ±ÅŸ cevap verirsen â†’ buton "ğŸ”„ Tekrar (3)" gÃ¶sterir<br>
                    â€¢ <small style="color: #999; display: none;">ğŸ’¡ Debug modu: Konsolda <code>CONFIG.debugTest = true; testReviewWords()</code> yazÄ±n</small><br><br>
                    
                    <strong>âœ… Ã–ÄŸrenildi Kelimeler:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>Ã¶ÄŸrenilmiÅŸ kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ Her kelime ayrÄ± bir kart olarak listelenir<br>
                    â€¢ En az 15 doÄŸru cevap ve %60 muvaffakiyet oranÄ± gerekir<br>
                    â€¢ UstalÄ±k mertebesi 3.0'Ä±n Ã¼zerinde olmalÄ±<br>
                    â€¢ Her doÄŸru cevap +0.2, her yanlÄ±ÅŸ cevap -0.5 ustalÄ±k puanÄ± verir<br>
                    â€¢ Tahmini: 15-20 soru (yanlÄ±ÅŸlar varsa daha fazla)<br><br>
                    
                    <strong>ğŸ“š ZorlanÄ±lan Kelimeler:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>zorlandÄ±ÄŸÄ±n kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ Her kelime ayrÄ± bir kart olarak listelenir<br>
                    â€¢ Ä°lk oyundan itibaren gÃ¶rÃ¼nebilir<br>
                    â€¢ Muvaffakiyet oranÄ± %60'Ä±n altÄ±nda VEYA ustalÄ±k mertebesi 1.0'Ä±n altÄ±nda olan kelimeler<br>
                    â€¢ YanlÄ±ÅŸ cevap verdiÄŸin kelimeler hemen bu kategoride gÃ¶rÃ¼nÃ¼r<br><br>
                    
                    <strong>ğŸ• Son GÃ¶rÃ¼len Kelimeler:</strong><br>
                    â€¢ Buton Ã¼zerindeki sayÄ±, <strong>son 7 gÃ¼nde gÃ¶rÃ¼len kelime sayÄ±sÄ±nÄ±</strong> gÃ¶sterir<br>
                    â€¢ Her kelime ayrÄ± bir kart olarak listelenir<br>
                    â€¢ Son gÃ¶rÃ¼lme zamanÄ±na gÃ¶re sÄ±ralanÄ±r (en yeni Ã¶nce)<br>
                    â€¢ Son bir hafta iÃ§inde Ã§alÄ±ÅŸtÄ±ÄŸÄ±n tÃ¼m kelimeleri gÃ¶sterir<br><br>
                    
                    <strong>ğŸ”„ Genel:</strong><br>
                    â€¢ ZorlandÄ±ÄŸÄ±n kelimeler otomatik olarak daha sÄ±k gÃ¶sterilir<br>
                    â€¢ Uzun sÃ¼re gÃ¶rÃ¼lmeyen kelimeler tekrar Ã¶nceliklendirilir
                </div>
            </div>

            </div>
            <!-- Kelime Ä°statistikleri BÃ¶lÃ¼mÃ¼ Sonu -->
            
            <!-- DetaylÄ± Analitik BÃ¶lÃ¼mÃ¼ -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                <h4 style="margin: 0 0 15px 0; font-size: 1.1em; color: #667eea; font-weight: 600;">ğŸ“Š DetaylÄ± Analitik</h4>
                
                <!-- Zaman Analizi -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9em; font-weight: 600; color: #333; margin-bottom: 10px;">â° BugÃ¼nkÃ¼ Aktiflik</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85em;">
                        <div>
                            <div style="color: #666; margin-bottom: 4px;">SÃ¼re</div>
                            <div style="font-weight: 600; color: #667eea;" id="analyticsTodayTime">0 dk</div>
            </div>
                        <div>
                            <div style="color: #666; margin-bottom: 4px;">Sual/Saat</div>
                            <div style="font-weight: 600; color: #667eea;" id="analyticsQuestionPerHour">0</div>
                            <div style="font-size: 0.7em; color: #999; margin-top: 2px; line-height: 1.2;">Mevcut hÄ±zÄ±nÄ±zla saatte Ã§Ã¶zebileceÄŸiniz soru sayÄ±sÄ±</div>
                        </div>
                    </div>
                </div>
                
                <!-- Hedef Tahmini -->
                <div style="background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9em; font-weight: 600; color: #333; margin-bottom: 10px;">ğŸ¯ GÃ¼nlÃ¼k Hedef Durumu</div>
                    <div style="font-size: 0.85em; color: #555; margin-bottom: 8px;">
                        <div style="margin-bottom: 6px;">
                            <span style="color: #666;">Hedef:</span> <strong id="analyticsDailyGoal">0</strong> Hasene
            </div>
                        <div style="margin-bottom: 6px;">
                            <span style="color: #666;">Ä°lerleme:</span> <strong id="analyticsTodayProgress">0</strong> / <span id="analyticsDailyGoalTotal">0</span> Hasene
                        </div>
                        <div style="background: rgba(255,255,255,0.5); height: 8px; border-radius: 4px; margin: 8px 0; overflow: hidden;">
                            <div id="analyticsGoalProgressBar" style="background: #f39c12; height: 100%; width: 0%; transition: width 0.3s;"></div>
                        </div>
                        <div style="font-size: 0.8em; color: #856404;">
                            <span id="analyticsTimeToGoal">Tahmini sÃ¼re hesaplanÄ±yor...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Kelime Performans Ã–zeti -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9em; font-weight: 600; color: #333; margin-bottom: 10px;">ğŸ“ˆ Kelime Ameli</div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85em;">
                        <div>
                            <div style="color: #666; margin-bottom: 4px;">Ortalama BaÅŸarÄ±</div>
                            <div style="font-weight: 600; color: #27ae60;" id="analyticsAvgSuccess">%0</div>
                        </div>
                        <div>
                            <div style="color: #666; margin-bottom: 4px;">En Zor Kelime</div>
                            <div style="font-weight: 600; color: #e74c3c; font-size: 0.8em;" id="analyticsHardestWord">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ã–ÄŸrenme HaritasÄ± -->
                <div style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9em; font-weight: 600; color: #333; margin-bottom: 10px;">ğŸ—ºï¸ Ã–ÄŸrenme HaritasÄ±</div>
                    <div style="font-size: 0.85em; color: #555;">
                        <div style="margin-bottom: 8px;">
                            <span style="color: #27ae60;">â—</span> <strong>Ã–ÄŸrenildi:</strong> <span id="analyticsLearnedCount">0</span> kelime
                        </div>
                        <div style="margin-bottom: 8px;">
                            <span style="color: #f39c12;">â—</span> <strong>Pratik Gerekli:</strong> <span id="analyticsPracticeCount">0</span> kelime
                        </div>
                        <div>
                            <span style="color: #e74c3c;">â—</span> <strong>ZorlanÄ±lan:</strong> <span id="analyticsStrugglingCount">0</span> kelime
                        </div>
                    </div>
                </div>
            </div>
            <!-- DetaylÄ± Analitik BÃ¶lÃ¼mÃ¼ Sonu -->
            
            <!-- Liderlik Tablosu BÃ¶lÃ¼mÃ¼ -->
            <div style="margin-top: 20px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
                <h4 style="margin: 0 0 15px 0; font-size: 1.1em; color: #667eea; font-weight: 600;">ğŸ† Liderlik Tablosu</h4>
                
                <div style="background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 0.9em; font-weight: 600; color: #333; margin-bottom: 10px; text-align: center;">ğŸ“Š SÄ±ralaman</div>
                    <div style="text-align: center; font-size: 1.5em; font-weight: bold; color: #8b4513;" id="leaderboardYourRank">-</div>
                    <div style="text-align: center; font-size: 0.85em; color: #555; margin-top: 8px;" id="leaderboardYourScore">Hasene: 0</div>
                </div>
                
                <!-- Liderlik Listesi -->
                <div id="leaderboardList" style="max-height: 300px; overflow-y: auto; margin-bottom: 15px;">
                    <div style="text-align: center; padding: 20px; color: #666; font-size: 0.9em;">
                        HenÃ¼z liderlik tablosu verisi yok. Ders talebe ederek sÄ±ralamaya katÄ±l!
                    </div>
                </div>
                
                <!-- Not: Bu basit bir yerel liderlik tablosudur. GerÃ§ek bir sosyal Ã¶zellik iÃ§in sunucu desteÄŸi gerekir. -->
                <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; font-size: 0.75em; color: #666; text-align: center;">
                    ğŸ’¡ Bu yerel bir liderlik tablosudur. Daha geliÅŸmiÅŸ sosyal Ã¶zellikler iÃ§in sunucu desteÄŸi gereklidir.
                </div>
            </div>
            <!-- Liderlik Tablosu BÃ¶lÃ¼mÃ¼ Sonu -->
            
            </div>
            <!-- Scroll Edilebilir Ä°Ã§erik Sonu -->

        </div>
    </div>

    <!-- Daily Goal Settings Modal -->
    <div class="modal" id="dailyGoalModal" onclick="handleDailyGoalModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="dailyGoalModalTitle" aria-label="GÃ¼nlÃ¼k vird ayarlarÄ± modalÄ±">
        <div class="modal-content" style="max-width: 360px;" onclick="event.stopPropagation();">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                <h3 style="margin: 0; font-size: 1.05em; text-align: center; flex: 1;">ğŸ¯ GÃ¼nlÃ¼k Hedef SeÃ§</h3>
                <button onclick="event.stopPropagation(); closeDailyGoalModal();" style="background: transparent; border: none; font-size: 24px; cursor: pointer; color: #999; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s; flex-shrink: 0;" onmouseover="this.style.background='#f0f0f0'; this.style.color='#e74c3c';" onmouseout="this.style.background='transparent'; this.style.color='#999';">Ã—</button>
            </div>
            <p style="text-align: center; color: #666; font-size: 0.8em; margin-bottom: 20px;">
                Ne kadar Ã§alÄ±ÅŸmak istiyorsun?
            </p>
            
            <div style="display: flex; flex-direction: column; gap: 12px;">
                <button id="dailyGoalEasyBtn" data-goal="easy" style="background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); color: white; border: none; padding: 16px; border-radius: 12px; cursor: pointer; text-align: left; transition: transform 0.3s; box-shadow: 0 4px 12px rgba(74,222,128,0.3); touch-action: manipulation; -webkit-tap-highlight-color: transparent;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 1.8em;">ğŸŒ±</span>
                        <div>
                            <div style="font-weight: 600; font-size: 0.95em;">Rahat</div>
                            <div style="font-size: 0.75em; opacity: 0.9;">GÃ¼nde 1,300 Hasene - ~10 dakika</div>
                        </div>
                    </div>
                </button>
                
                <button id="dailyGoalNormalBtn" data-goal="normal" style="background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%); color: white; border: none; padding: 16px; border-radius: 12px; cursor: pointer; text-align: left; transition: transform 0.3s; box-shadow: 0 4px 12px rgba(96,165,250,0.3); touch-action: manipulation; -webkit-tap-highlight-color: transparent;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 1.8em;">ğŸ¯</span>
                        <div>
                            <div style="font-weight: 600; font-size: 0.95em;">Normal</div>
                            <div style="font-size: 0.75em; opacity: 0.9;">GÃ¼nde 2,700 Hasene - ~20 dakika</div>
                        </div>
                    </div>
                </button>
                
                <button id="dailyGoalSeriousBtn" data-goal="serious" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; border: none; padding: 16px; border-radius: 12px; cursor: pointer; text-align: left; transition: transform 0.3s; box-shadow: 0 4px 12px rgba(249,115,22,0.3); touch-action: manipulation; -webkit-tap-highlight-color: transparent;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 1.8em;">ğŸ”¥</span>
                        <div>
                            <div style="font-weight: 600; font-size: 0.95em;">Ciddi</div>
                            <div style="font-size: 0.75em; opacity: 0.9;">GÃ¼nde 6,000 Hasene - ~45 dakika</div>
                        </div>
                    </div>
                </button>
            </div>
            
            <button id="closeDailyGoalBtn" style="width: auto; max-width: 200px; padding: 10px 30px; background: #e74c3c; color: white; border: none; border-radius: 8px; font-size: 0.9em; font-weight: bold; cursor: pointer; margin: 20px auto 0; display: block; touch-action: manipulation; -webkit-tap-highlight-color: transparent;">
                Kapat
            </button>
        </div>
    </div>

    <!-- Hasene Info Modal -->
    <div class="modal" id="xpInfoModal" onclick="handleXPInfoModalClick(event)" role="dialog" aria-modal="true" aria-labelledby="xpInfoModalTitle" aria-label="Hasene puan sistemi bilgi modalÄ±">
        <div class="modal-content stats-content" style="max-width: 500px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; padding: 16px; touch-action: pan-y;">
            <!-- BaÅŸlÄ±k ve Kapat Butonu -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; flex-shrink: 0;">
                <h3 style="margin: 0; font-size: 1.1em; font-weight: 700; color: #667eea;">ğŸ’° Hasene Sistemi</h3>
                <button id="closeXPInfoBtn" class="modal-close-btn" onclick="event.stopPropagation(); closeXPInfoModal();">Ã—</button>
            </div>

            <!-- Scroll Edilebilir Ä°Ã§erik -->
            <div id="xpInfoScrollableContent" style="flex: 1; overflow-y: auto; overflow-x: hidden; min-height: 0; padding-right: 4px; margin-bottom: 12px; -webkit-overflow-scrolling: touch;">
            
                <!-- Ã–zet Bilgi - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 14px; border-radius: 12px; margin-bottom: 14px; text-align: center; box-shadow: 0 4px 12px rgba(102,126,234,0.3);">
                    <div style="font-size: 12px; margin-bottom: 6px; opacity: 0.9; font-weight: 500;">â±ï¸ HÄ±zlÄ± Ã§alÄ±ÅŸarak</div>
                    <div style="font-size: 14px; font-weight: 600; opacity: 0.95;">1 Saat Amel = ~8,500 Hasene</div>
            </div>
            
                <!-- YÄ±ldÄ±z Sistemi - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #fff9e6 0%, #ffe6f0 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #ffc107; box-shadow: 0 2px 8px rgba(255,193,7,0.2);">
                    <h4 style="margin: 0 0 10px 0; color: #f59e0b; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1em;">â­</span> YÄ±ldÄ±z Sistemi
                    </h4>
                    <div style="font-size: 12px; color: #555; line-height: 1.6;">
                        <div style="background: white; padding: 12px; border-radius: 10px; margin-bottom: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <strong style="color: #f59e0b; font-size: 14px;">100 Hasene = 1 YÄ±ldÄ±z</strong>
                        </div>
                        <div style="color: #666; font-size: 11px; font-weight: 500;">
                            Her sahih cevabÄ±n mÃ¼kÃ¢fatÄ±. SÃ¼rekli ilerleme gÃ¶rÃ¼rsÃ¼n! ğŸ“ˆ
                        </div>
                </div>
            </div>
            
                <!-- Mertebe Sistemi - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #667eea; box-shadow: 0 2px 8px rgba(102,126,234,0.2);">
                    <h4 style="margin: 0 0 10px 0; color: #667eea; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1em;">ğŸ†</span> Mertebe Sistemi
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                        <div style="background: white; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥‰</div>
                            <div style="font-weight: 700; color: #cd7f32; margin-bottom: 4px; font-size: 12px;">2,000 Hasene</div>
                            <div style="font-size: 11px; color: #888; font-weight: 500;">MÃ¼btedi</div>
                            <div style="font-size: 10px; color: #aaa; margin-top: 2px;">~15 dk</div>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥ˆ</div>
                            <div style="font-weight: 700; color: #c0c0c0; margin-bottom: 4px; font-size: 12px;">8,500 Hasene</div>
                            <div style="font-size: 11px; color: #888; font-weight: 500;">MÃ¼terakki</div>
                            <div style="font-size: 10px; color: #aaa; margin-top: 2px;">~1 saat</div>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ¥‡</div>
                            <div style="font-weight: 700; color: #ffd700; margin-bottom: 4px; font-size: 12px;">25,500 Hasene</div>
                            <div style="font-size: 11px; color: #888; font-weight: 500;">MÃ¼tecaviz</div>
                            <div style="font-size: 10px; color: #aaa; margin-top: 2px;">~3 gÃ¼n</div>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 10px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 1.5em; margin-bottom: 4px;">ğŸ’</div>
                            <div style="font-weight: 700; color: #00d9ff; margin-bottom: 4px; font-size: 12px;">85,000 Hasene</div>
                            <div style="font-size: 11px; color: #888; font-weight: 500;">MÃ¼tebahhir</div>
                            <div style="font-size: 10px; color: #aaa; margin-top: 2px;">~10 gÃ¼n</div>
                        </div>
                </div>
            </div>
            
                <!-- Bonuslar - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #fff7e6 0%, #ffe6d9 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #f97316; box-shadow: 0 2px 8px rgba(249,115,22,0.2);">
                    <h4 style="margin: 0 0 10px 0; color: #f97316; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1em;">ğŸ</span> Ä°hsan Sistemleri
                    </h4>
                    <div style="display: flex; flex-direction: column; gap: 8px;">
                        <div style="background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                            <div style="font-weight: 700; color: #f97316; margin-bottom: 4px; font-size: 13px;">ğŸ”¥ Silsile Bonusu</div>
                            <div style="font-size: 11px; color: #555; line-height: 1.5; font-weight: 500;">
                    <strong>Her 3 sahih cevap = +5 Hasene bonus!</strong><br>
                                <span style="color: #888; font-size: 10px;">Tevali yap, ilave mÃ¼kÃ¢fat kazan!</span>
                </div>
            </div>
                        <div style="background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                            <div style="font-weight: 700; color: #3b82f6; margin-bottom: 4px; font-size: 13px;">ğŸ¯ GÃ¼nlÃ¼k Vird Bonusu</div>
                            <div style="font-size: 11px; color: #555; line-height: 1.5; font-weight: 500;">
                    GÃ¼nlÃ¼k virdini tamamla:<br>
                    <strong style="color: #3b82f6; font-size: 13px;">+1,000 Hasene MÃ¼jdesi!</strong>
                            </div>
                        </div>
                        <div style="background: white; padding: 10px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: transform 0.2s;" onmouseover="this.style.transform='translateX(2px)'" onmouseout="this.style.transform='translateX(0)'">
                            <div style="font-weight: 700; color: #d97706; margin-bottom: 4px; font-size: 13px;">ğŸ“‹ GÃ¼nlÃ¼k GÃ¶revler</div>
                            <div style="font-size: 11px; color: #555; line-height: 1.5; font-weight: 500;">
                                TÃ¼m gÃ¼nlÃ¼k gÃ¶revleri tamamla:<br>
                                <strong style="color: #d97706; font-size: 13px;">+2,500 Hasene Ä°hsan!</strong>
                            </div>
                        </div>
                </div>
            </div>
            
                <!-- Oyun ModlarÄ±na GÃ¶re Puan - Modern TasarÄ±m -->
                <div style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 14px; border-radius: 12px; margin-bottom: 14px; border-left: 4px solid #667eea; box-shadow: 0 2px 8px rgba(102,126,234,0.2);">
                    <h4 style="margin: 0 0 10px 0; color: #667eea; font-size: 14px; font-weight: 600; display: flex; align-items: center; gap: 6px;">
                        <span style="font-size: 1.1em;">ğŸ“š</span> Ders TÃ¼rlerine GÃ¶re Puan
                    </h4>
                    <div style="display: flex; flex-direction: column; gap: 8px; font-size: 0.85em;">
                        <div style="background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <div style="font-weight: 700; color: #667eea; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; font-size: 12px;">
                                <span>ğŸ”¤</span> Kelime Ã‡evir
                    </div>
                            <div style="color: #555; line-height: 1.5; font-size: 11px;">
                                <strong>Kelime ZorluÄŸu Ã— 2 Hasene</strong><br>
                                <span style="font-size: 10px; color: #888;">Kolay: 10-18 | Orta: 20-22 | Zor: 24-42</span>
                    </div>
                    </div>
                        <div style="background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <div style="font-weight: 700; color: #667eea; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; font-size: 12px;">
                                <span>ğŸµ</span> Dinle ve Bul
                    </div>
                            <div style="color: #555; line-height: 1.5; font-size: 11px;">
                                <strong>Kelime ZorluÄŸu Ã— 2 Hasene</strong>
                </div>
            </div>
                        <div style="background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <div style="font-weight: 700; color: #667eea; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; font-size: 12px;">
                                <span>ğŸ“</span> BoÅŸluk Doldur
                </div>
                            <div style="color: #555; line-height: 1.5; font-size: 11px;">
                                <strong>Sabit 10 Hasene</strong>
            </div>
                        </div>
                        <div style="background: #fff3cd; padding: 8px; border-radius: 8px; margin-top: 6px; border-left: 3px solid #ffc107;">
                            <div style="font-size: 10px; color: #856404; line-height: 1.4;">
                                <strong>â„¹ï¸ Not:</strong> ğŸ“– Ayet Oku, ğŸ¤² Dua Ã–ÄŸren, ğŸ“š Hadis Oku modlarÄ±nda puan kazanÄ±lmaz (sadece gÃ¼nlÃ¼k gÃ¶rev ilerlemesi)
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Scroll edilebilir iÃ§erik sonu -->

            <!-- Kapat Butonu (Sabit) -->
            <div style="flex-shrink: 0; margin-top: 12px; text-align: center;">
                <button id="closeXPInfoBtn" style="width: auto; max-width: 200px; padding: 8px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 8px; font-size: 0.85em; font-weight: bold; cursor: pointer; box-shadow: 0 4px 12px rgba(102,126,234,0.3); transition: transform 0.2s;">
                Bereketli olsun ğŸ¤²
            </button>
            </div>
        </div>
    </div>

    <!-- Oyun Bitti Modal -->
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2 id="gameOverTitle">ğŸ˜¢ Oyun Bitti</h2>
            <p id="gameOverText"></p>
            <p>Toplam Hasene: <strong id="finalScore">0</strong></p>
            <button class="modal-btn" id="restartBtn">Yeniden BaÅŸla</button>
        </div>
    </div>

    <!-- Custom Alert Modal (Professional Replacement for alert()) -->
    <div id="customAlertModal" class="modal" style="display: none; z-index: 10000;" onclick="if(event.target === this) closeCustomAlert();">
        <div class="modal-content" style="max-width: 90vw; width: 420px; text-align: center; padding: 30px; padding-bottom: 20px; position: relative; max-height: 90vh; display: flex; flex-direction: column; overflow: hidden;" onclick="event.stopPropagation();">
            <button class="modal-close-btn" id="customAlertCloseBtn" onclick="closeCustomAlert();" style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.1); border: none; font-size: 1.8em; color: #666; cursor: pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s; z-index: 10; touch-action: manipulation; -webkit-tap-highlight-color: transparent; min-width: 44px; min-height: 44px;">Ã—</button>
            <div id="customAlertIcon" style="font-size: 2.5em; margin-bottom: 12px; flex-shrink: 0;">â„¹ï¸</div>
            <div id="customAlertTitle" style="font-size: 1.1em; font-weight: bold; color: #333; margin-bottom: 8px; flex-shrink: 0;">Bilgi</div>
            <div id="customAlertMessage" style="font-size: 0.9em; color: #666; margin-bottom: 20px; line-height: 1.5; flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding-right: 8px; max-height: 50vh;"></div>
            <button id="customAlertOKBtn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px 40px; border-radius: 8px; font-size: 0.95em; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(102,126,234,0.3); transition: transform 0.2s; touch-action: manipulation; -webkit-tap-highlight-color: transparent; min-width: 120px; min-height: 48px; flex-shrink: 0; margin-top: auto;">
                Tamam
            </button>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 10000; align-items: center; justify-content: center;">
        <div style="text-align: center; color: white;">
            <div style="border: 4px solid rgba(255,255,255,0.3); border-top: 4px solid white; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 15px;"></div>
            <div style="font-size: 1.1em; font-weight: 600;">YÃ¼kleniyor...</div>
        </div>
    </div>
    
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>


    <!-- ğŸ® ANA OYUN MANTIÄI - Refactored to External File -->
    <script src="js/game-core.js"></script>


<!-- PUSH NOTIFICATIONS SYSTEM -->
<script>
    // ============ PUSH BÄ°LDÄ°RÄ°MLERÄ° SÄ°STEMÄ° ============
    let notificationPermission = 'default';
    let notificationSettings = {
        dailyReminder: true,
        streakWarning: true,
        goalCompletion: true,
        customEvents: true,
        reminderTime: '20:00' // VarsayÄ±lan: 20:00
    };
    
    // Bildirim ayarlarÄ±nÄ± yÃ¼kle
    function loadNotificationSettings() {
        try {
            const saved = localStorage.getItem('haseneNotificationSettings');
            if (saved) {
                notificationSettings = { ...notificationSettings, ...JSON.parse(saved) };
            }
        } catch (e) {
            log.error('Bildirim ayarlarÄ± yÃ¼kleme hatasÄ±:', e);
        }
    }
    
    // Bildirim ayarlarÄ±nÄ± kaydet
    function saveNotificationSettings() {
        try {
            localStorage.setItem('haseneNotificationSettings', JSON.stringify(notificationSettings));
        } catch (e) {
            log.error('Bildirim ayarlarÄ± kaydetme hatasÄ±:', e);
        }
    }
    
    // Bildirim izni kontrolÃ¼ ve isteme
    async function requestNotificationPermission() {
        if (!('Notification' in window)) {
            log.warn('Bu tarayÄ±cÄ± bildirimleri desteklemiyor');
            return false;
        }
        
        notificationPermission = Notification.permission;
        
        if (notificationPermission === 'default') {
            try {
                const permission = await Notification.requestPermission();
                notificationPermission = permission;
                log.debug('Bildirim izni:', permission);
                return permission === 'granted';
            } catch (e) {
                log.error('Bildirim izni hatasÄ±:', e);
                return false;
            }
        }
        
        return notificationPermission === 'granted';
    }
    
    // Bildirim gÃ¶ster (Service Worker Ã¼zerinden)
    async function showNotification(title, options = {}) {
        if (!('Notification' in window) || !('serviceWorker' in navigator)) {
            log.warn('Bildirimler desteklenmiyor');
            return;
        }
        
        if (Notification.permission !== 'granted') {
            const granted = await requestNotificationPermission();
            if (!granted) {
                log.warn('Bildirim izni verilmedi');
                return;
            }
        }
        
        try {
            const registration = await navigator.serviceWorker.ready;
            
            const notificationOptions = {
                body: options.body || '',
                icon: options.icon || './assets/images/icon-192-v4-RED-MUSHAF.png',
                badge: options.badge || './assets/images/icon-192-v4-RED-MUSHAF.png',
                tag: options.tag || 'hasene-notification',
                requireInteraction: options.requireInteraction || false,
                data: {
                    url: options.url || window.location.href,
                    ...options.data
                },
                vibrate: options.vibrate || [200, 100, 200],
                ...options
            };
            
            await registration.showNotification(title, notificationOptions);
            log.debug('Bildirim gÃ¶sterildi:', title);
        } catch (e) {
            log.error('Bildirim gÃ¶sterilirken hata:', e);
        }
    }
    
    // GÃ¼nlÃ¼k hatÄ±rlatÄ±cÄ± zamanlayÄ±cÄ±sÄ±
    let dailyReminderTimer = null;
    
    function scheduleDailyReminder() {
        if (!notificationSettings.dailyReminder) return;
        
        // Mevcut zamanlayÄ±cÄ±yÄ± temizle
        if (dailyReminderTimer) {
            clearTimeout(dailyReminderTimer);
        }
        
        const [hours, minutes] = notificationSettings.reminderTime.split(':').map(Number);
        const now = new Date();
        const reminderTime = new Date();
        reminderTime.setHours(hours, minutes, 0, 0);
        
        // EÄŸer bugÃ¼nÃ¼n saati geÃ§tiyse, yarÄ±n iÃ§in ayarla
        if (reminderTime <= now) {
            reminderTime.setDate(reminderTime.getDate() + 1);
        }
        
        const msUntilReminder = reminderTime.getTime() - now.getTime();
        
        dailyReminderTimer = setTimeout(async () => {
            // BugÃ¼n oyun oynanmÄ±ÅŸ mÄ± kontrol et
            const today = typeof getLocalDateString === 'function' ? getLocalDateString() : new Date().toISOString().split('T')[0];
            const lastPlayDate = localStorage.getItem('haseneLastPlayDate');
            
            // dailyTasks'tan veya localStorage'dan bugÃ¼nkÃ¼ istatistikleri al
            let todayStats = {};
            if (typeof window.dailyTasks !== 'undefined' && window.dailyTasks && window.dailyTasks.todayStats) {
                todayStats = window.dailyTasks.todayStats;
            } else {
                try {
                    const dailyTasksStr = localStorage.getItem('hasene_dailyTasks');
                    if (dailyTasksStr) {
                        const dailyTasks = JSON.parse(dailyTasksStr);
                        if (dailyTasks && dailyTasks.todayStats) {
                            todayStats = dailyTasks.todayStats;
                        }
                    }
                } catch (e) {
                    // Hata durumunda boÅŸ obje kullan
                }
            }
            
            const hasPlayedToday = lastPlayDate === today && (todayStats.toplamPuan > 0 || todayStats.kelimeCevir > 0);
            
            if (!hasPlayedToday) {
                await showNotification('ğŸ“š GÃ¼nlÃ¼k HatÄ±rlatÄ±cÄ±', {
                    body: 'BugÃ¼n henÃ¼z oyun oynamadÄ±nÄ±z! Serinizi bozmamak iÃ§in hemen oyuna baÅŸlayÄ±n. ğŸ”¥',
                    tag: 'daily-reminder',
                    requireInteraction: false,
                    vibrate: [200, 100, 200]
                });
            }
            
            // YarÄ±n iÃ§in tekrar zamanla
            scheduleDailyReminder();
        }, msUntilReminder);
        
        log.debug('GÃ¼nlÃ¼k hatÄ±rlatÄ±cÄ± zamanlandÄ±:', reminderTime);
    }
    
    // Seri bozulma uyarÄ±sÄ± kontrolÃ¼
    function checkStreakWarning() {
        if (!notificationSettings.streakWarning) return;
        
        try {
            const streakDataStr = localStorage.getItem('haseneStreakData');
            if (!streakDataStr) return;
            
            const streakData = JSON.parse(streakDataStr);
            const currentStreak = streakData.currentStreak || 0;
            const lastPlayDate = localStorage.getItem('haseneLastPlayDate');
            const today = getLocalDateString();
            
            // EÄŸer seri varsa ve bugÃ¼n oyun oynanmamÄ±ÅŸsa uyar
            if (currentStreak > 0 && lastPlayDate !== today) {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                const yesterdayStr = getLocalDateString(yesterday);
                
                // DÃ¼n oynanmÄ±ÅŸsa, bugÃ¼n uyarÄ± ver
                if (lastPlayDate === yesterdayStr) {
                    showNotification('âš ï¸ Seri Bozulma UyarÄ±sÄ±!', {
                        body: `${currentStreak} gÃ¼nlÃ¼k seriniz bozulmak Ã¼zere! BugÃ¼n oyun oynamayÄ± unutmayÄ±n. ğŸ”¥`,
                        tag: 'streak-warning',
                        requireInteraction: false,
                        vibrate: [300, 100, 300]
                    });
                }
            }
        } catch (e) {
            log.error('Seri uyarÄ±sÄ± kontrolÃ¼ hatasÄ±:', e);
        }
    }
    
    // Hedef tamamlama bildirimi
    function checkGoalCompletion() {
        if (!notificationSettings.goalCompletion) return;
        
        try {
            const dailyGoalHasene = parseInt(localStorage.getItem('dailyGoalHasene') || '2700');
            
            // dailyTasks'tan veya localStorage'dan bugÃ¼nkÃ¼ puanÄ± al
            let todayProgress = 0;
            
            // Ã–nce global dailyTasks deÄŸiÅŸkenini kontrol et
            if (typeof window.dailyTasks !== 'undefined' && window.dailyTasks && window.dailyTasks.todayStats) {
                todayProgress = window.dailyTasks.todayStats.toplamPuan || 0;
            } else {
                // localStorage'dan oku
                try {
                    const dailyTasksStr = localStorage.getItem('hasene_dailyTasks');
                    if (dailyTasksStr) {
                        const dailyTasks = JSON.parse(dailyTasksStr);
                        if (dailyTasks && dailyTasks.todayStats) {
                            todayProgress = dailyTasks.todayStats.toplamPuan || 0;
                        }
                    }
                } catch (e) {
                    // localStorage'dan okuyamazsa, dailyHasene'yi kullan
                    todayProgress = parseInt(localStorage.getItem('dailyHasene') || '0');
                }
            }
            
            // Hedef tamamlandÄ±ysa bildirim gÃ¶ster
            if (todayProgress >= dailyGoalHasene && dailyGoalHasene > 0) {
                // Sadece bir kez bildirim gÃ¶ster (bugÃ¼n iÃ§in)
                const today = typeof getLocalDateString === 'function' ? getLocalDateString() : new Date().toISOString().split('T')[0];
                const goalNotificationShown = localStorage.getItem(`goalNotification_${today}`);
                if (!goalNotificationShown) {
                    showNotification('ğŸ‰ GÃ¼nlÃ¼k Hedef TamamlandÄ±!', {
                        body: `Tebrikler! GÃ¼nlÃ¼k virdinizi tamamladÄ±nÄ±z (${dailyGoalHasene} puan). Devam edin! ğŸ†`,
                        tag: 'goal-completion',
                        requireInteraction: false,
                        vibrate: [200, 100, 200, 100, 200]
                    });
                    localStorage.setItem(`goalNotification_${today}`, 'true');
                }
            }
        } catch (e) {
            log.error('Hedef tamamlama kontrolÃ¼ hatasÄ±:', e);
        }
    }
    
    // Ã–zel etkinlik bildirimi gÃ¶nder
    function sendCustomEventNotification(title, body, options = {}) {
        if (!notificationSettings.customEvents) return;
        
        showNotification(title, {
            body: body,
            tag: options.tag || 'custom-event',
            requireInteraction: options.requireInteraction || false,
            vibrate: options.vibrate || [200, 100, 200],
            ...options
        });
    }
    
    // Sayfa yÃ¼klendiÄŸinde bildirim sistemini baÅŸlat
    window.addEventListener('DOMContentLoaded', () => {
        loadNotificationSettings();
        
        // Bildirim izni kontrolÃ¼
        if ('Notification' in window) {
            notificationPermission = Notification.permission;
            
            // Ä°zin verilmiÅŸse zamanlayÄ±cÄ±larÄ± baÅŸlat
            if (notificationPermission === 'granted') {
                scheduleDailyReminder();
                checkStreakWarning();
            }
        }
        
        // Her 30 dakikada bir seri uyarÄ±sÄ± kontrol et
        setInterval(() => {
            if (notificationPermission === 'granted') {
                checkStreakWarning();
            }
        }, 30 * 60 * 1000); // 30 dakika
        
        // Her 5 dakikada bir hedef tamamlama kontrolÃ¼
        setInterval(() => {
            if (notificationPermission === 'granted') {
                checkGoalCompletion();
            }
        }, 5 * 60 * 1000); // 5 dakika
    });
    
    // Global eriÅŸim iÃ§in
    window.requestNotificationPermission = requestNotificationPermission;
    window.showNotification = showNotification;
    window.sendCustomEventNotification = sendCustomEventNotification;
    window.notificationSettings = notificationSettings;
    window.saveNotificationSettings = saveNotificationSettings;
</script>

<!-- DARK MODE TOGGLE -->
<script>
    // Dark Mode Toggle Function
    function toggleDarkMode() {
        const body = document.body;
        const isDark = body.classList.toggle('dark-mode');
        const darkModeIcon = document.getElementById('darkModeIcon');
        
        // Debug
        log.debug('Dark mode toggled:', isDark);
        log.debug('Body classes:', body.className);
        
        // LocalStorage'a kaydet
        localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
        
        // Icon gÃ¼ncelle
        if (darkModeIcon) {
            darkModeIcon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
        }
        
        // Buton stilini gÃ¼ncelle
        const darkModeBtn = document.getElementById('darkModeToggle');
        if (darkModeBtn) {
            if (isDark) {
                darkModeBtn.style.background = 'linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)';
            } else {
                darkModeBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            }
        }
    }
    
    // Sayfa yÃ¼klendiÄŸinde dark mode durumunu kontrol et
    document.addEventListener('DOMContentLoaded', function() {
        const savedDarkMode = localStorage.getItem('darkMode');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
        // EÄŸer kullanÄ±cÄ± tercihi varsa onu kullan, yoksa sistem tercihini kullan
        if (savedDarkMode === 'enabled' || (savedDarkMode === null && prefersDark)) {
            document.body.classList.add('dark-mode');
            const darkModeIcon = document.getElementById('darkModeIcon');
            if (darkModeIcon) darkModeIcon.textContent = 'â˜€ï¸';
        }
        
        // Sistem tercihi deÄŸiÅŸikliÄŸini dinle (sadece kullanÄ±cÄ± tercihi yoksa)
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
            if (!localStorage.getItem('darkMode')) {
                if (e.matches) {
                    document.body.classList.add('dark-mode');
                    const darkModeIcon = document.getElementById('darkModeIcon');
                    if (darkModeIcon) darkModeIcon.textContent = 'â˜€ï¸';
                } else {
                    document.body.classList.remove('dark-mode');
                    const darkModeIcon = document.getElementById('darkModeIcon');
                    if (darkModeIcon) darkModeIcon.textContent = 'ğŸŒ™';
                }
            }
        });
    });
</script>

<!-- PWA INSTALL PROMPT -->
<script>
    let deferredPrompt;
    let pwaInstallBtn;
    
    // localStorage kontrolÃ¼ - daha Ã¶nce yÃ¼kleme yapÄ±ldÄ± mÄ±?
    function hasPWAInstallBeenShown() {
        return localStorage.getItem('pwaInstallShown') === 'true' || localStorage.getItem('pwaInstalled') === 'true';
    }
    
    function markPWAInstallShown() {
        localStorage.setItem('pwaInstallShown', 'true');
    }
    
    function markPWAInstalled() {
        localStorage.setItem('pwaInstalled', 'true');
        localStorage.setItem('pwaInstallShown', 'true');
    }
    
    // Sayfa yÃ¼klendiÄŸinde butonu al
    window.addEventListener('DOMContentLoaded', () => {
        pwaInstallBtn = document.getElementById('pwaInstallBtn');
        
        // Mobil cihaz kontrolÃ¼
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;
        
        // EÄŸer standalone modda Ã§alÄ±ÅŸÄ±yorsa (zaten yÃ¼klÃ¼), butonu gizle
        if (isStandalone) {
            if (pwaInstallBtn) {
                pwaInstallBtn.style.display = 'none';
            }
            markPWAInstalled();
            log.debug('ğŸ“± Uygulama standalone modda Ã§alÄ±ÅŸÄ±yor (zaten yÃ¼klÃ¼)');
            return;
        }
        
        // EÄŸer daha Ã¶nce yÃ¼kleme yapÄ±ldÄ±ysa veya gÃ¶sterildiyse, butonu gizle
        if (hasPWAInstallBeenShown()) {
            if (pwaInstallBtn) {
                pwaInstallBtn.style.display = 'none';
            }
            log.debug('ğŸ“± PWA install butonu daha Ã¶nce gÃ¶sterildi, tekrar gÃ¶sterilmiyor');
            return;
        }
        
        // Buton baÅŸlangÄ±Ã§ta gizli, sadece beforeinstallprompt event'i geldiÄŸinde gÃ¶sterilecek
        if (pwaInstallBtn) {
            pwaInstallBtn.style.display = 'none';
        }
    });
    
    // beforeinstallprompt event'i yakala
    window.addEventListener('beforeinstallprompt', (e) => {
        // EÄŸer daha Ã¶nce yÃ¼kleme yapÄ±ldÄ±ysa, event'i ignore et
        if (hasPWAInstallBeenShown()) {
            log.debug('ğŸ“± PWA install daha Ã¶nce gÃ¶sterildi, event ignore ediliyor');
            return;
        }
        
        // VarsayÄ±lan prompt'u engelle
        e.preventDefault();
        // Event'i sakla
        deferredPrompt = e;
        
        // Mobil cihaz kontrolÃ¼
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Mobil cihazlarda butonu gÃ¶ster (beforeinstallprompt event'i geldiÄŸinde)
        if (pwaInstallBtn && isMobile) {
            pwaInstallBtn.style.display = 'block';
            log.debug('ğŸ“² PWA install butonu gÃ¶rÃ¼nÃ¼r (mobil cihaz, beforeinstallprompt)');
        } else if (pwaInstallBtn && !isMobile) {
            // MasaÃ¼stÃ¼nde de gÃ¶ster (talimatlar iÃ§in)
            pwaInstallBtn.style.display = 'block';
            log.debug('ğŸ’» PWA install butonu gÃ¶rÃ¼nÃ¼r (masaÃ¼stÃ¼, talimatlar iÃ§in)');
        }
    });
    
    // Uygulama zaten yÃ¼klÃ¼yse butonu gizle
    window.addEventListener('appinstalled', () => {
        if (pwaInstallBtn) {
            pwaInstallBtn.style.display = 'none';
        }
        deferredPrompt = null;
        markPWAInstalled();
        log.debug('âœ… PWA baÅŸarÄ±yla yÃ¼klendi');
    });
    
    // PWA install fonksiyonu
    window.triggerPWAInstall = async () => {
        if (!deferredPrompt) {
            // Mobil cihaz kontrolÃ¼
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (!isMobile) {
                // MasaÃ¼stÃ¼nde buton gÃ¶rÃ¼nmemeli, ama eÄŸer gÃ¶rÃ¼nÃ¼rse kullanÄ±cÄ±ya bilgi ver
                log.debug('ğŸ’» MasaÃ¼stÃ¼ cihaz - PWA install tarayÄ±cÄ± UI ile yapÄ±lÄ±r');
                alert('ğŸ’» MasaÃ¼stÃ¼nde uygulamayÄ± yÃ¼klemek iÃ§in:\n\n' +
                      'â€¢ Chrome/Edge: Adres Ã§ubuÄŸundaki yÃ¼kle ikonuna (â¬‡) tÄ±klayÄ±n\n' +
                      'â€¢ Veya MenÃ¼ (â‹®) > "UygulamayÄ± yÃ¼kle"\n\n' +
                      'Not: Bu buton sadece mobil cihazlarda gÃ¶rÃ¼nÃ¼r.');
                return;
            }
            
            // Mobil cihazlarda prompt yoksa manuel talimat ver
            log.debug('âš ï¸ PWA install prompt mevcut deÄŸil (mobil cihaz)');
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
            const isAndroid = /Android/.test(navigator.userAgent);
            const isChrome = /Chrome/.test(navigator.userAgent);
            
            let instructions = 'ğŸ“² UygulamayÄ± ana ekrana eklemek iÃ§in:\n\n';
            
            if (isIOS) {
                instructions += 'â€¢ Safari: PaylaÅŸ butonu (â–¡â†‘) > "Ana Ekrana Ekle"\n';
            } else if (isAndroid) {
                if (isChrome) {
                    instructions += 'â€¢ Chrome: MenÃ¼ (â‹®) > "UygulamayÄ± yÃ¼kle" veya "Ana ekrana ekle"\n';
                } else {
                    instructions += 'â€¢ TarayÄ±cÄ± menÃ¼sÃ¼nden "Ana ekrana ekle" seÃ§eneÄŸini bulun\n';
                }
            } else {
                instructions += 'â€¢ TarayÄ±cÄ± menÃ¼sÃ¼nden "Ana ekrana ekle" seÃ§eneÄŸini bulun\n';
            }
            
            alert(instructions);
            return;
        }
        
        // Prompt'u gÃ¶ster
        deferredPrompt.prompt();
        
        // KullanÄ±cÄ±nÄ±n seÃ§imini bekle
        const { outcome } = await deferredPrompt.userChoice;
        
        if (outcome === 'accepted') {
            log.debug('âœ… KullanÄ±cÄ± PWA yÃ¼klemeyi kabul etti');
            markPWAInstalled();
        } else {
            log.debug('âŒ KullanÄ±cÄ± PWA yÃ¼klemeyi reddetti');
            markPWAInstallShown(); // ReddettiÄŸinde de gÃ¶sterildi olarak iÅŸaretle, tekrar Ã§Ä±kmasÄ±n
        }
        
        // Prompt'u temizle
        deferredPrompt = null;
        
        // Butonu gizle
        if (pwaInstallBtn) {
            pwaInstallBtn.style.display = 'none';
        }
    };
</script>

<button id="pwaInstallBtn" onclick="window.triggerPWAInstall()"
    style="
        position: fixed;
        bottom: 100px;
        right: 15px;
        left: 15px;
        max-width: 300px;
        margin: 0 auto;
        padding: 14px 20px;
        background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
        border: none;
        border-radius: 14px;
        font-size: clamp(14px, 3.5vw, 16px);
        font-weight: bold;
        color: #1a1a1a;
        box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        z-index: 10000;
        display: none;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    "
    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(255, 215, 0, 0.6)'"
    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(255, 215, 0, 0.5)'">
    ğŸ“² UygulamayÄ± YÃ¼kle
</button>

</body>
</html>




