<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="HASENE - Ä°nteraktif ArapÃ§a Ã¶ÄŸrenme uygulamasÄ±. Duolingo tarzÄ± gamification ile Kuran ArapÃ§asÄ± Ã¶ÄŸrenin.">
    <meta name="keywords" content="ArapÃ§a Ã¶ÄŸrenme, Kuran ArapÃ§asÄ±, Ä°slami eÄŸitim, gamification, interactive learning">
    <meta name="author" content="YZOKUMUS">
    <meta name="theme-color" content="#2c5530">
    <title>HASENE - Duolingo TarzÄ± ArapÃ§a Ã–ÄŸrenme</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192-v4-RED-MUSHAF.png">
    <link rel="apple-touch-icon" href="icon-192-v4-RED-MUSHAF.png">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body ontouchstart="" tabindex="0">
    <!-- ğŸ¨ Duolingo-Style Loading Screen -->
    <div id="loadingScreen" class="screen duo-loading">
        <div class="duo-loading-container">
            <!-- Animated Character/Mascot -->
            <div class="duo-character">
                <div class="character-body">
                    <div class="duo-icon-wrapper">
                        <img src="icon-512-v4-RED-MUSHAF.png" alt="HASENE Mascot" class="duo-mascot-icon" id="loadingRotatingIcon">
                        <div class="duo-sparkles">
                            <div class="sparkle sparkle-1">âœ¨</div>
                            <div class="sparkle sparkle-2">â­</div>
                            <div class="sparkle sparkle-3">ğŸ’«</div>
                            <div class="sparkle sparkle-4">ğŸŒŸ</div>
                        </div>
                    </div>
                </div>
                
                <!-- Breathing/Floating Animation -->
                <div class="duo-shadow"></div>
            </div>
            
            <!-- App Title with Animation -->
            <div class="duo-title-section">
                <h1 class="duo-title">
                    <span class="title-letter" style="--delay: 0s">H</span>
                    <span class="title-letter" style="--delay: 0.1s">A</span>
                    <span class="title-letter" style="--delay: 0.2s">S</span>
                    <span class="title-letter" style="--delay: 0.3s">E</span>
                    <span class="title-letter" style="--delay: 0.4s">N</span>
                    <span class="title-letter" style="--delay: 0.5s">E</span>
                </h1>
                <p class="duo-subtitle">ArapÃ§a Ã¶ÄŸrenmeye hazÄ±r mÄ±sÄ±n?</p>
            </div>
            
            <!-- Modern Progress Bar -->
            <div class="duo-progress-section">
                <div class="duo-progress-container">
                    <div class="duo-progress-track">
                        <div class="duo-progress-fill" id="loadingProgress"></div>
                        <div class="progress-glow"></div>
                    </div>
                    
                    <!-- Progress Indicators -->
                    <div class="progress-milestones">
                        <div class="milestone milestone-1" data-progress="25">
                            <div class="milestone-icon">ğŸ“š</div>
                            <div class="milestone-label">Kelimeler</div>
                        </div>
                        <div class="milestone milestone-2" data-progress="50">
                            <div class="milestone-icon">ğŸ†</div>
                            <div class="milestone-label">Rozetler</div>
                        </div>
                        <div class="milestone milestone-3" data-progress="75">
                            <div class="milestone-icon">ğŸ”Š</div>
                            <div class="milestone-label">Sesler</div>
                        </div>
                        <div class="milestone milestone-4" data-progress="100">
                            <div class="milestone-icon">ğŸ®</div>
                            <div class="milestone-label">HazÄ±r!</div>
                        </div>
                    </div>
                </div>
                
                <div class="duo-percentage">
                    <span id="loadingPercentage">0</span><span class="percent-symbol">%</span>
                </div>
            </div>
            
            <!-- Inspirational Quote (Hadis) - Compact Version -->
            <div class="duo-inspiration">
                <div class="inspiration-content">
                    <div class="hadis-arabic">
                        Ù…ÙÙ†Ù’ Ù‚ÙØ±ÙØ£Ù Ø­ÙØ±Ù’ÙÙ‹Ø§ Ù…ÙÙ†Ù’ ÙƒÙØªÙØ§Ø¨Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙÙÙ„ÙÙ‡Ù Ø¨ÙÙ‡Ù Ø­ÙØ³ÙÙ†ÙØ©ÙŒ ÙˆÙØ§Ù„Ù’Ø­ÙØ³ÙÙ†ÙØ©Ù Ø¨ÙØ¹ÙØ´Ù’Ø±Ù Ø£ÙÙ…Ù’Ø«ÙØ§Ù„ÙÙ‡ÙØ§
                    </div>
                    <div class="hadis-translation">
                        "Kim Kur'an'dan bir harf okursa, ona bir hasene yazÄ±lÄ±r ve her hasene on misliyle mÃ¼kÃ¢fat edilir." <br>
                        <small style="opacity: 0.6;">- Tirmizi</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Background Animations -->
        <div class="duo-background-effects">
            <div class="floating-element elem-1">ğŸ•Œ</div>
            <div class="floating-element elem-2">ğŸ“¿</div>
            <div class="floating-element elem-3">ğŸŒ™</div>
            <div class="floating-element elem-4">â­</div>
            <div class="floating-element elem-5">ğŸ’«</div>
        </div>
    </div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen" style="display: none;">
        <div class="header">
            <div class="user-info">
                <div class="streak-info">
                    <i class="fas fa-fire streak-icon"></i>
                    <span id="streakCount">0</span>
                </div>
                <div class="hasene-info">
                    <i class="fas fa-star hasene-icon"></i>
                    <span id="haseneCount">0</span>
                </div>
                <div class="level-info">
                    <span>Seviye <span id="levelCount">1</span></span>
                    <i class="fas fa-trophy level-icon"></i>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="progress-section">
                <div class="daily-goal">
                    <h3>ğŸ¯ GÃ¼nlÃ¼k Hedef</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="dailyProgress" style="width: 0%"></div>
                    </div>
                    <p><span id="dailyHasene">0</span>/250 Hasene</p>
                </div>
                
                <!-- XP Progress -->
                <div class="xp-section" style="margin-top: 15px;">
                    <h3>âš¡ Seviye Ä°lerlemen</h3>
                    <div class="level-progress">
                        <span class="current-level">Seviye <span id="currentLevel">1</span></span>
                        <div class="xp-bar">
                            <div class="xp-fill" id="xpProgress" style="width: 0%"></div>
                        </div>
                        <span class="next-level">Seviye <span id="nextLevel">2</span></span>
                    </div>
                    <p class="xp-info"><span id="currentXP">0</span>/<span id="nextLevelXP">500</span> XP</p>
                </div>
            </div>

            <div class="quick-actions">
                <button id="dailyMissionsBtn" class="action-btn missions" onclick="showDailyMissions()" 
                        aria-label="GÃ¼nlÃ¼k gÃ¶revleri gÃ¶rÃ¼ntÃ¼le" title="BugÃ¼nÃ¼n Ã¶zel gÃ¶revleri ve Ã¶dÃ¼lleri">
                    <i class="fas fa-tasks" aria-hidden="true"></i>
                    <span>GÃ¼nlÃ¼k GÃ¶revler</span>
                    <span id="missionsBadgeCount" class="badge-counter" style="display: none;">0</span>
                </button>
                <button id="achievementsBtn" class="action-btn achievements" onclick="showAchievements()" 
                        aria-label="BaÅŸarÄ±larÄ± gÃ¶rÃ¼ntÃ¼le" title="BaÅŸarÄ±larÄ± ve rozetleri gÃ¶rÃ¼ntÃ¼le">
                    <i class="fas fa-trophy" aria-hidden="true"></i>
                    <span>BaÅŸarÄ±lar</span>
                    <span id="unlockedBadgeCount" class="badge-counter" style="display: none;">0</span>
                </button>
                <button id="statsBtn" class="action-btn stats" onclick="showStats()" 
                        aria-label="Ä°statistikleri gÃ¶rÃ¼ntÃ¼le" title="Ã–ÄŸrenme istatistiklerin ve ilerlemen">
                    <i class="fas fa-chart-bar" aria-hidden="true"></i>
                    <span>Ä°statistikler</span>
                </button>
                <button id="soundSettingsBtn" class="action-btn sound-settings" onclick="showSoundSettings()"
                        aria-label="Ses ayarlarÄ±" title="MÃ¼zik ve ses efektleri ayarlarÄ±" style="display: none;">
                    <i class="fas fa-music" aria-hidden="true"></i>
                    <span>Ses AyarlarÄ±</span>
                </button>
                <button class="action-btn calendar" onclick="toggleCalendar()" ontouchstart="" tabindex="0">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Takvim</span>
                </button>
                
                <button id="musicButton" class="action-btn sound-control" onclick="playMusic()">
                    <i class="fas fa-music"></i> Ä°lahi
                </button>
                
                <button class="action-btn hadis-control" onclick="showRandomHadis()" 
                        aria-label="Kutub-i Sitte'den hadis oku" title="5972 hadis arasÄ±ndan rastgele bir hadis oku ve 10 hasene kazan">
                    <i class="fas fa-book-open" aria-hidden="true"></i> Kutub-i Sitte
                </button>

                <script>
                    let currentAudio = null; // Global deÄŸiÅŸken

                    function playMusic() {
                        if (currentAudio) {
                            if (!currentAudio.paused) {
                                currentAudio.pause(); // Ã‡alan sesi durdur
                                currentAudio.currentTime = 0; // Sesi baÅŸa sar
                                return;
                            }
                        } else {
                            currentAudio = new Audio('https://dinimizislam.com/Download/Ses/Ilahiler/4/AyDo%C4%9Fdu.mp3');
                        }

                        currentAudio.currentTime = 0; // Sesi baÅŸa sar
                        currentAudio.play(); // Sesi Ã§al
                    }
                </script>
            </div>

            <!-- Zorluk SeÃ§imi -->
            <div class="difficulty-section">
                <h3>ğŸ¯ Zorluk Seviyesi SeÃ§</h3>
                <div class="difficulty-buttons">
                                        <button class="difficulty-btn easy" id="easyBtn" onclick="setDifficulty('easy')" 
                            role="radio" aria-checked="false" aria-label="Kolay seviye" 
                            title="Temel seviye - Basit kelimeler">
                        <i class="fas fa-seedling" aria-hidden="true"></i>
                        <span>Kolay</span>
                    </button>
                                        <button class="difficulty-btn medium active" id="mediumBtn" onclick="setDifficulty('medium')" 
                            role="radio" aria-checked="true" aria-label="Orta seviye" 
                            title="Orta seviye - Dengeli zorluk">
                        <i class="fas fa-balance-scale" aria-hidden="true"></i>
                        <span>Orta</span>
                    </button>
                                        <button class="difficulty-btn hard" id="hardBtn" onclick="setDifficulty('hard')" 
                            role="radio" aria-checked="false" aria-label="Zor seviye" 
                            title="Ä°leri seviye - KarmaÅŸÄ±k kelimeler">
                        <i class="fas fa-fire" aria-hidden="true"></i>
                        <span>Zor</span>
                    </button>
                </div>
            </div>

            <div class="game-modes">
                <button class="game-mode-btn primary" onclick="startGame('translation')" ontouchstart="" tabindex="0"
                        aria-label="Ã‡eviri oyunu baÅŸlat" title="ArapÃ§a kelimeleri TÃ¼rkÃ§eye Ã§evirerek Ã¶ÄŸren">
                    <i class="fas fa-language" aria-hidden="true"></i>
                    <h3>Ã‡eviri Oyunu</h3>
                    <p>ArapÃ§a kelimeleri TÃ¼rkÃ§e'ye Ã§evir</p>
                </button>
                <button class="game-mode-btn secondary" onclick="startGame('listening')" ontouchstart="" tabindex="0">
                    <i class="fas fa-headphones"></i>
                    <h3>Dinleme Oyunu</h3>
                    <p>Sesi dinle ve anlamÄ±nÄ± bul</p>
                </button>
                <button class="game-mode-btn challenge" onclick="startGame('speed')" ontouchstart="" tabindex="0" style="background: linear-gradient(135deg, #ff6b6b, #ee5a24);">
                    <i class="fas fa-bolt"></i>
                    <h3>HÄ±z Modu âš¡</h3>
                    <p>10 saniyede cevapla! HÄ±zlÄ± puan kazan!</p>
                </button>
                <button class="game-mode-btn fillblank" onclick="startGame('fillblank')" ontouchstart="" tabindex="0" style="background: linear-gradient(135deg, #9c27b0, #673ab7);">
                    <i class="fas fa-puzzle-piece"></i>
                    <h3>BoÅŸluk Doldur ğŸ“</h3>
                    <p>Ayet'teki eksik kelimeleri bul!</p>
                </button>
                <button class="game-mode-btn ayet" onclick="showAyetTask()" ontouchstart="" tabindex="0" style="background: linear-gradient(135deg, #3f51b5, #2196f3); color: #fff; text-shadow: 0 2px 8px #0008;">
                    <i class="fas fa-book-open"></i>
                    <h3 style="color:#fff;text-shadow:0 2px 8px #0008;">Ayet Dinle &amp; Oku</h3>
                    <p style="color:#fff;text-shadow:0 2px 8px #0008;">Her gÃ¼n bir ayet dinle ve oku!</p>
                </button>
                <button class="game-mode-btn dua" onclick="showDuaTask()" ontouchstart="" tabindex="0" style="background: linear-gradient(135deg, #009688, #26a69a); color: #fff; text-shadow: 0 2px 8px #0008;">
                    <i class="fas fa-pray"></i>
                    <h3 style="color:#fff;text-shadow:0 2px 8px #0008;">Dua Dinleme GÃ¶revi</h3>
                    <p style="color:#fff;text-shadow:0 2px 8px #0008;">GÃ¼n iÃ§inde dinlediÄŸin dua kadar hasene kazan!</p>
                </button>
            </div>

            <!-- Reset Button -->
            <div class="reset-section" style="margin-top: 30px; text-align: center;">
                <button class="reset-btn" onclick="resetGame()" 
                        aria-label="Oyunu sÄ±fÄ±rla" title="DÄ°KKAT: TÃ¼m ilerleme silinecek!" 
                        style="background: linear-gradient(135deg, #ff4444, #cc0000); color: white; border: none; padding: 12px 24px; border-radius: 10px; font-size: 16px; cursor: pointer; box-shadow: 0 4px 12px rgba(255, 68, 68, 0.3); transition: all 0.3s ease;">
                    <i class="fas fa-refresh" aria-hidden="true"></i>
                    SÄ±fÄ±rla
                </button>
                <p style="font-size: 12px; color: #666; margin-top: 8px;">âš ï¸ TÃ¼m ilerleme silinecek</p>
            </div>

        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen" style="display: none;">
        <div class="game-header">
            <div class="game-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="gameProgress"></div>
                </div>
                <span class="progress-text"><span id="currentQuestion">1</span>/<span id="totalQuestions">10</span></span>
            </div>
            <div class="game-stats">
                <div class="hearts">
                    <i class="fas fa-heart" id="heart1"></i>
                    <i class="fas fa-heart" id="heart2"></i>
                    <i class="fas fa-heart" id="heart3"></i>
                    <i class="fas fa-heart" id="heart4"></i>
                    <i class="fas fa-heart" id="heart5"></i>
                </div>
                <div class="game-hasene">
                    <i class="fas fa-star"></i>
                    <span id="gameHasene">0</span>
                </div>
                <!-- HÄ±z Modu Timer -->
                <div class="speed-timer" id="speedTimer" style="display: none;">
                    <i class="fas fa-clock"></i>
                    <span id="questionTimer">10</span>s
                </div>
            </div>
            <button class="close-btn" onclick="returnToMenu()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="game-content">
            <div class="question-section">
                <div class="question-type" id="questionType">ArapÃ§a kelimeyi Ã§evir</div>
                <div class="question-text" id="questionText">Ø®ÙØªÙÙ…Ù</div>
                <div class="word-id" id="wordId">ID: 2:7:1</div>
                <button class="audio-btn" id="audioBtn" onclick="playAudio()">
                    <i class="fas fa-volume-up"></i>
                </button>
            </div>

            <div class="answer-section">
                <!-- Multiple Choice Mode -->
                <div class="options-container" id="optionsContainer">
                    <button class="option-btn" onclick="selectOption(this, 0)">mÃ¼hÃ¼rlemiÅŸtir</button>
                    <button class="option-btn" onclick="selectOption(this, 1)">neredeyse</button>
                    <button class="option-btn" onclick="selectOption(this, 2)">isterler</button>
                    <button class="option-btn" onclick="selectOption(this, 3)">deÄŸildir</button>
                </div>

                <!-- Text Input Mode -->
                <div class="input-container" id="inputContainer" style="display: none;">
                    <input type="text" id="answerInput" placeholder="ArapÃ§a kelimeyi yazÄ±n..." onkeypress="checkEnter(event)" readonly>
                    <button class="check-btn" onclick="checkAnswer()">Kontrol Et</button>
                    

                </div>
            </div>

            <div class="action-buttons">
                <button class="skip-btn" onclick="skipQuestion()">GeÃ§</button>
            </div>
        </div>

        <!-- Result Feedback -->
        <div class="result-feedback" id="resultFeedback" style="display: none;">
            <div class="feedback-content">
                <div class="feedback-icon" id="feedbackIcon">
                    <i class="fas fa-check"></i>
                </div>
                <div class="feedback-text" id="feedbackText">DoÄŸru!</div>
                <div class="feedback-meaning" id="feedbackMeaning">Ø®ÙØªÙÙ…Ù = mÃ¼hÃ¼rlemiÅŸtir</div>
                <div class="feedback-actions">
                    <button class="continue-btn" id="continueBtn" onclick="nextQuestion()" style="display: none;">Devam Et</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hearts Depleted Screen -->
    <div id="heartsDepleted" class="screen" style="display: none;">
        <div class="hearts-depleted-content">
            <div class="broken-heart-animation">
                <i class="fas fa-heart-broken"></i>
            </div>
            
            <h2>Kalplerin Bitti!</h2>
            <p>EndiÅŸelenme, kalp yenilemenin birkaÃ§ yolu var:</p>
            
            <div class="heart-refill-options">
                <button class="refill-option watch-ad" onclick="watchAdForHearts()">
                    <i class="fas fa-play-circle"></i>
                    <div class="option-content">
                        <h3>Reklam Ä°zle</h3>
                        <p>30 saniyelik reklam izle, 1 kalp kazan!</p>
                        <span class="reward">+1 â¤ï¸</span>
                    </div>
                </button>
                
                <button class="refill-option wait-time" onclick="showWaitTimer()">
                    <i class="fas fa-clock"></i>
                    <div class="option-content">
                        <h3>Bekle</h3>
                        <p>Her 30 dakikada 1 kalp yenilenir</p>
                        <span class="timer" id="heartTimer">29:45</span>
                    </div>
                </button>
                
                <button class="refill-option unlimited" onclick="buyUnlimitedHearts()">
                    <i class="fas fa-infinity"></i>
                    <div class="option-content">
                        <h3>SÄ±nÄ±rsÄ±z Kalp</h3>
                        <p>HiÃ§ kalp kaybetme! (SimÃ¼lasyon)</p>
                        <span class="price">100 Hasene</span>
                    </div>
                </button>
            </div>
            
            <div class="hearts-depleted-actions">
                <button class="menu-btn" onclick="returnToMenu()">
                    <i class="fas fa-home"></i>
                    Ana MenÃ¼
                </button>
            </div>
        </div>
    </div>

    <!-- Game Complete Screen -->
    <div id="gameComplete" class="screen" style="display: none;">
        <div class="complete-content">
            <div class="complete-animation">
                <div class="trophy-animation">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stars">
                    <i class="fas fa-star" id="star1"></i>
                    <i class="fas fa-star" id="star2"></i>
                    <i class="fas fa-star" id="star3"></i>
                </div>
            </div>
            
            <h2>Tebrikler!</h2>
            <p>Dersi tamamladÄ±n!</p>
            
            <div class="results-summary">
                <div class="result-item">
                    <i class="fas fa-star"></i>
                    <span>KazanÄ±lan Hasene</span>
                    <span id="earnedHasene">0</span>
                </div>
                <div class="result-item">
                    <i class="fas fa-check-circle"></i>
                    <span>DoÄŸru Cevaplar</span>
                    <span id="correctAnswers">0/10</span>
                </div>
                <div class="result-item">
                    <i class="fas fa-percentage"></i>
                    <span>DoÄŸruluk OranÄ±</span>
                    <span id="gameAccuracy">0%</span>
                </div>
                <div class="result-item">
                    <i class="fas fa-fire"></i>
                    <span>Streak</span>
                    <span id="finalStreak">0 gÃ¼n</span>
                </div>
            </div>
            
            <div class="complete-actions">
                <button class="continue-learning-btn" onclick="startGame()">
                    <i class="fas fa-redo"></i>
                    Tekrar Oyna
                </button>
                <button class="menu-btn" onclick="returnToMenu()">
                    <i class="fas fa-home"></i>
                    Ana MenÃ¼
                </button>
            </div>
        </div>
    </div>

    <!-- Level Up Modal -->
    <div id="levelUpModal" class="modal" style="display: none;">
        <div class="modal-content level-up">
            <div class="level-up-animation">
                <i class="fas fa-trophy"></i>
                <div class="level-badge">
                    <span id="newLevel">2</span>
                </div>
            </div>
            <h2>Seviye AtladÄ±n!</h2>
            <p>Seviye <span id="newLevelText">2</span>'ye ulaÅŸtÄ±n!</p>
            <button class="modal-btn" onclick="closeLevelUpModal()">Harika!</button>
        </div>
    </div>

    <!-- Streak Modal -->
    <div id="streakModal" class="modal" style="display: none;">
        <div class="modal-content streak-modal">
            <div class="streak-animation">
                <i class="fas fa-fire"></i>
            </div>
            <h2>Streak Korundu!</h2>
            <p><span id="streakDays">1</span> gÃ¼nlÃ¼k streak'in devam ediyor!</p>
            <button class="modal-btn" onclick="closeStreakModal()">Devam Et!</button>
        </div>
    </div>

    <!-- ğŸ† Modern Achievements Modal -->
    <div id="achievementsModal" class="modal" style="display: none;">
        <div class="modal-content modern-achievements-modal">
            <div class="achievements-header">
                <div class="header-content">
                    <h2><i class="fas fa-trophy"></i> BaÅŸarÄ± Rozetleri</h2>
                    <div class="achievements-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="unlockedCount">0</span>
                            <span class="stat-label">KazanÄ±lan</span>
                        </div>
                        <div class="stat-divider">|</div>
                        <div class="stat-item">
                            <span class="stat-number" id="totalCount">27</span>
                            <span class="stat-label">Toplam</span>
                        </div>
                    </div>
                </div>
                <button class="close-modal-btn" onclick="closeAchievementsModal()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Rarity Filter Tabs -->
            <div class="rarity-tabs">
                <button class="rarity-tab active" onclick="filterByRarity('all')" ontouchstart="" data-rarity="all" tabindex="0">
                    <i class="fas fa-medal"></i>
                    <span>TÃ¼mÃ¼</span>
                    <span class="tab-count" id="allCount">0</span>
                </button>
                <button class="rarity-tab bronze" onclick="filterByRarity('bronze')" ontouchstart="" data-rarity="bronze" tabindex="0">
                    <i class="fas fa-medal"></i>
                    <span>Bronz</span>
                    <span class="tab-count" id="bronzeCount">0</span>
                </button>
                <button class="rarity-tab silver" onclick="filterByRarity('silver')" ontouchstart="" data-rarity="silver" tabindex="0">
                    <i class="fas fa-medal"></i>
                    <span>GÃ¼mÃ¼ÅŸ</span>
                    <span class="tab-count" id="silverCount">0</span>
                </button>
                <button class="rarity-tab gold" onclick="filterByRarity('gold')" ontouchstart="" data-rarity="gold" tabindex="0">
                    <i class="fas fa-medal"></i>
                    <span>AltÄ±n</span>
                    <span class="tab-count" id="goldCount">0</span>
                </button>
                <button class="rarity-tab diamond" onclick="filterByRarity('diamond')" ontouchstart="" data-rarity="diamond" tabindex="0">
                    <i class="fas fa-gem"></i>
                    <span>Elmas</span>
                    <span class="tab-count" id="diamondCount">0</span>
                </button>
            </div>
            
            <!-- Achievements Grid -->
            <div class="achievements-container">
                <div class="achievements-grid" id="achievementsGrid">
                    <!-- Rozetler JavaScript ile eklenecek -->
                </div>
            </div>
            
            <!-- Progress Summary -->
            <div class="achievements-progress">
                <div class="progress-header">
                    <h3><i class="fas fa-chart-line"></i> Ä°lerleme Ã–zeti</h3>
                </div>
                <div class="progress-bars">
                    <div class="progress-item bronze">
                        <div class="progress-label">
                            <span class="rarity-icon">ğŸ¥‰</span>
                            <span>Bronz Rozetler</span>
                            <span class="progress-fraction" id="bronzeFraction">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="bronzeProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="progress-item silver">
                        <div class="progress-label">
                            <span class="rarity-icon">ğŸ¥ˆ</span>
                            <span>GÃ¼mÃ¼ÅŸ Rozetler</span>
                            <span class="progress-fraction" id="silverFraction">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="silverProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="progress-item gold">
                        <div class="progress-label">
                            <span class="rarity-icon">ğŸ¥‡</span>
                            <span>AltÄ±n Rozetler</span>
                            <span class="progress-fraction" id="goldFraction">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="goldProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    <div class="progress-item diamond">
                        <div class="progress-label">
                            <span class="rarity-icon">ğŸ’</span>
                            <span>Elmas Rozetler</span>
                            <span class="progress-fraction" id="diamondFraction">0/0</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="diamondProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Missions Modal -->
    <div id="dailyMissionsModal" class="modal" style="display: none;">
        <div class="modal-content missions-modal">
            <div class="modal-header">
                <h2><i class="fas fa-tasks"></i> GÃ¼nlÃ¼k GÃ¶revler</h2>
                <button class="close-modal-btn" onclick="closeDailyMissionsModal()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="missions-content">
                <div class="missions-summary">
                    <div class="summary-item">
                        <span class="summary-number" id="completedMissions">0</span>
                        <span class="summary-label">Tamamlanan</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-number" id="totalMissions">0</span>
                        <span class="summary-label">Toplam</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-number" id="dailyRewards">0</span>
                        <span class="summary-label">Hasene</span>
                    </div>
                </div>
                <div class="missions-grid" id="missionsGrid">
                    <!-- GÃ¶revler JavaScript ile eklenecek -->
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendar-modal" class="modal" style="display: none;">
        <div class="modal-content calendar-modal">
            <div class="modal-header">
                <h2><i class="fas fa-calendar-alt"></i> Streak Takviminiz</h2>
                <button class="close-modal-btn" onclick="closeCalendarModal()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="calendar-modal-content">
                <div class="calendar-header">
                    <button class="calendar-nav" onclick="changeMonth(-1)" ontouchstart="" tabindex="0">â€¹</button>
                    <h4 id="currentMonth">Ekim 2025</h4>
                    <button class="calendar-nav" onclick="changeMonth(1)" ontouchstart="" tabindex="0">â€º</button>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Takvim gÃ¼nleri buraya JavaScript ile eklenecek -->
                </div>
                <div class="calendar-legend">
                    <div class="legend-item empty">
                        <div class="legend-dot"></div>
                        <span>OynanmadÄ±</span>
                    </div>
                    <div class="legend-item partial">
                        <div class="legend-dot"></div>
                        <span>KÄ±smi (1-999)</span>
                    </div>
                    <div class="legend-item complete">
                        <div class="legend-dot"></div>
                        <span>TamamlandÄ± (250+)</span>
                    </div>
                </div>
                
                <!-- ğŸ“Š Streak Ä°statistikleri Paneli -->
                <div class="calendar-stats-panel">
                    <div class="stats-header">
                        <h4><i class="fas fa-chart-line"></i> Streak Ä°statistikleri</h4>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card best">
                            <div class="stat-icon">ğŸ†</div>
                            <div class="stat-info">
                                <div class="stat-number" id="longestStreak">0</div>
                                <div class="stat-label">En Uzun Streak</div>
                            </div>
                        </div>
                        
                        <div class="stat-card current">
                            <div class="stat-icon">ğŸ”¥</div>
                            <div class="stat-info">
                                <div class="stat-number" id="currentStreakStat">0</div>
                                <div class="stat-label">Mevcut Streak</div>
                            </div>
                        </div>
                        
                        <div class="stat-card total">
                            <div class="stat-icon">ğŸ“…</div>
                            <div class="stat-info">
                                <div class="stat-number" id="totalActiveDays">0</div>
                                <div class="stat-label">Toplam Aktif GÃ¼n</div>
                            </div>
                        </div>
                        
                        <div class="stat-card month">
                            <div class="stat-icon">ğŸŒŸ</div>
                            <div class="stat-info">
                                <div class="stat-number" id="monthlyProgress">0%</div>
                                <div class="stat-label">AylÄ±k Ä°lerleme</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ğŸ¯ Hedef ve Motivasyon -->
                    <div class="motivation-section">
                        <div class="motivation-text">
                            <i class="fas fa-quote-left"></i>
                            <span id="motivationQuote">"DevamlÄ±lÄ±k mÃ¼kemmellikten daha Ã¶nemlidir"</span>
                            <i class="fas fa-quote-right"></i>
                        </div>
                        
                        <div class="next-milestone">
                            <div class="milestone-progress">
                                <span>Bir sonraki hedef: </span>
                                <strong id="nextMilestone">30 gÃ¼nlÃ¼k streak</strong>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="milestoneProgress" style="width: 20%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hadis Modal -->
    <div id="hadisModal" class="modal" style="display: none;">
        <div class="modal-content hadis-modal">
            <div class="modal-header">
                <h2><i class="fas fa-book-open"></i> GÃ¼nÃ¼n Hadisi</h2>
                <button class="close-modal-btn" onclick="closeHadisModal()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="hadis-content" id="hadisContent">
                <!-- Hadis iÃ§eriÄŸi buraya JavaScript ile eklenecek -->
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div id="statsModal" class="modal" style="display: none;">
        <div class="modal-content stats-modal">
            <div class="modal-header">
                <h2><i class="fas fa-chart-bar"></i> DetaylÄ± Ä°statistikler</h2>
                <button class="close-modal-btn" onclick="closeStatsModal()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="stats-content">
                <div class="stats-summary">
                    <div class="stat-item">
                        <i class="fas fa-star"></i>
                        <div>
                            <h3 id="statTotalHasene">0</h3>
                            <p>Toplam Hasene</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-calendar-check"></i>
                        <div>
                            <h3 id="statMaxStreak">0</h3>
                            <p>En Uzun Streak</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-gamepad"></i>
                        <div>
                            <h3 id="statTotalGames">0</h3>
                            <p>DoÄŸru Kelimeler</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-fire"></i>
                        <div>
                            <h3 id="statCurrentStreak">0</h3>
                            <p>GÃ¼nlÃ¼k Streak</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-brain"></i>
                        <div>
                            <h3 id="statWordsLearned">0</h3>
                            <p>Ã–ÄŸrenilen Kelimeler</p>
                        </div>
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-percentage"></i>
                        <div>
                            <h3 id="statAccuracyRate">0%</h3>
                            <p>DoÄŸruluk OranÄ±</p>
                        </div>
                    </div>
                </div>
                
                <!-- Streak Shop Section -->
                <div class="streak-protection-section">
                    <div class="protection-header">
                        <h3>ğŸ›¡ï¸ Streak KorumasÄ±</h3>
                        <p>Streak'ini korumak iÃ§in Ã¶zel Ã¶ÄŸeler!</p>
                    </div>
                    <div class="protection-inventory">
                        <div class="protection-item">
                            <span class="protection-icon">ğŸ›¡ï¸</span>
                            <span class="protection-name">Streak Freeze</span>
                            <span class="protection-count" id="streakFreezeCount">0</span>
                        </div>
                        <div class="protection-item">
                            <span class="protection-icon">ğŸ–ï¸</span>
                            <span class="protection-name">Weekend Pass</span>
                            <span class="protection-count" id="weekendPassCount">0</span>
                        </div>
                    </div>
                    <button class="shop-access-btn" onclick="showStreakShop()">
                        <i class="fas fa-shopping-cart"></i>
                        Koruma MaÄŸazasÄ±
                    </button>
                    
                    <button class="shop-access-btn" onclick="closeStatsModal()" style="margin-top: 10px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); color: white;">
                        âŒ Kapat
                    </button>
                </div>
                
                <div class="stats-charts">
                    <div class="chart-section">
                        <h3>HaftalÄ±k Hasene GrafiÄŸi</h3>
                        <div class="weekly-chart" id="weeklyChart">
                            <!-- Grafik buraya eklenecek -->
                        </div>
                    </div>
                    
                    <div class="stats-details">
                        <h3>Oyun Modu Ä°statistikleri</h3>
                        <div class="game-mode-stats">
                            <div class="mode-stat">
                                <span class="mode-name">Ã‡eviri</span>
                                <div class="mode-progress">
                                    <div class="mode-bar translation" id="translationBar"></div>
                                </div>
                                <span class="mode-percentage" id="translationPercent">0%</span>
                            </div>
                            <div class="mode-stat">
                                <span class="mode-name">Dinleme</span>
                                <div class="mode-progress">
                                    <div class="mode-bar listening" id="listeningBar"></div>
                                </div>
                                <span class="mode-percentage" id="listeningPercent">0%</span>
                            </div>
                            <div class="mode-stat">
                                <span class="mode-name">HÄ±z</span>
                                <div class="mode-progress">
                                    <div class="mode-bar speed" id="speedBar"></div>
                                </div>
                                <span class="mode-percentage" id="speedPercent">0%</span>
                            </div>
                            <div class="mode-stat">
                                <span class="mode-name">BoÅŸluk Doldur</span>
                                <div class="mode-progress">
                                    <div class="mode-bar fillblank" id="fillblankBar"></div>
                                </div>
                                <span class="mode-percentage" id="fillblankPercent">0%</span>
                            </div>
                            <div class="mode-stat">
                                <span class="mode-name">Ayet Dinleme</span>
                                <div class="mode-progress">
                                    <div class="mode-bar ayet" id="ayetBar"></div>
                                </div>
                                <span class="mode-percentage" id="ayetPercent">0%</span>
                            </div>
                            <div class="mode-stat">
                                <span class="mode-name">Dua Dinleme</span>
                                <div class="mode-progress">
                                    <div class="mode-bar dua" id="duaBar"></div>
                                </div>
                                <span class="mode-percentage" id="duaPercent">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievement Unlock Modal -->
    
    <!-- Streak Shop Modal -->
    <div id="streakShopModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ›¡ï¸ Streak Koruma MaÄŸazasÄ±</h2>
                <button class="close-modal-btn" onclick="closeStreakShop()" ontouchstart="" tabindex="0">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <p>Streak'ini korumak iÃ§in Ã¶zel Ã¶ÄŸeler satÄ±n al!</p>
            
            <div class="shop-items-grid">
                <div class="shop-item">
                    <div class="item-icon">ğŸ›¡ï¸</div>
                    <h3>Streak Freeze</h3>
                    <p>1 gÃ¼n koruma saÄŸlar. Bir gÃ¼n oynayamazsan streak'in kÄ±rÄ±lmaz.</p>
                    <div class="item-price">ğŸ’° 100 Hasene</div>
                    <div class="item-owned">Sahip olduÄŸun: <span id="ownedStreakFreezes">0</span></div>
                    <button class="shop-buy-btn" onclick="buyItem('streakFreeze')">SatÄ±n Al</button>
                </div>
                
                <div class="shop-item">
                    <div class="item-icon">ğŸ–ï¸</div>
                    <h3>Weekend Pass</h3>
                    <p>2 gÃ¼n koruma saÄŸlar. Hafta sonu iÃ§in mÃ¼kemmel!</p>
                    <div class="item-price">ğŸ’° 180 Hasene</div>
                    <div class="item-owned">Sahip olduÄŸun: <span id="ownedWeekendPasses">0</span></div>
                    <button class="shop-buy-btn" onclick="buyItem('weekendPass')">SatÄ±n Al</button>
                </div>
            </div>
            
            <div class="shop-info">
                <h4>ğŸ“– NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h4>
                <ul>
                    <li>ğŸ›¡ï¸ Streak Freeze: 1 gÃ¼n kaÃ§Ä±rÄ±rsan otomatik devreye girer</li>
                    <li>ğŸ–ï¸ Weekend Pass: 2 gÃ¼n kaÃ§Ä±rÄ±rsan otomatik devreye girer</li>
                    <li>âš¡ Koruma kullanÄ±ldÄ±ÄŸÄ±nda streak'in kÄ±rÄ±lmaz</li>
                    <li>ğŸ“± KorumalarÄ±n stokunu Ã¼stteki butondan gÃ¶rebilirsin</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Achievement Unlock Modal DEVRE DIÅI -->
    <!-- 
    <div id="achievementUnlockModal" class="modal">
        <div class="modal-content achievement-unlock">
            <div class="achievement-unlock-animation">
                <i class="fas fa-trophy" id="unlockedAchievementIcon"></i>
            </div>
            <h2>Yeni Rozet KazandÄ±n!</h2>
            <h3 id="unlockedAchievementTitle">BaÅŸarÄ± AdÄ±</h3>
            <p id="unlockedAchievementDesc">AÃ§Ä±klama</p>
            <button class="modal-btn" onclick="closeAchievementUnlockModal()">Harika!</button>
        </div>
    </div>
    -->

    <audio id="audioPlayer" preload="none"></audio>
    <audio id="backgroundMusic" preload="auto" loop>
        <source src="sounds/melody.wav" type="audio/wav">
        TarayÄ±cÄ±nÄ±z audio elementini desteklemiyor.
    </audio>
    <audio id="correctSound" src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+D2u2ccBSuBzvLZjTgHEWe57+OZUQ4IVKTk97VaFws+ltryxXksBS6Hz/LdjTgIG2q+7eSXSAoOVKLm9L1mFgkugM3110g+CV+16iKcWAcLflG1cfkGrrcY0U4YwyZs3+LB9M8H4VLQ+K36oLoi4WEYyCNU4dLDzOAfAAAA"></audio>
    <audio id="incorrectSound" src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+D2u2ccBSuBzvLZjTgHEWe57+OZUQ4IVKTk97VaFws+ltryxXksBS6Hz/LdjTgIG2q+7eSXSAoOVKLm9L1mFgkugM3110g+CV+16iKcWAcLflG1cfkGrrcY0U4YwyZs3+LB9M8H4VLQ+K36oLoi4WEYyCNU4dLDzOAfAAAA"></audio>
    <audio id="ayDogduAudio" src="https://dinimizislam.com/Download/Ses/Ilahiler/4/AyDo%C4%9Fdu.mp3" preload="auto"></audio>
    
    <!-- ğŸµ Enhanced Sound Effects - Web Audio API -->
    <audio id="achievementSound" preload="auto">
        <!-- Placeholder for achievement sound -->
    </audio>
    <audio id="streakSound" preload="auto">
        <!-- Placeholder for streak sound -->
    </audio>
    <audio id="levelUpSound" preload="auto">
        <!-- Placeholder for level up sound -->
    </audio>



    <script src="sounds/audio-generator.js"></script>
    <script src="party-effects.js"></script>
    <script src="script.js"></script>
    
    <!-- ğŸš« Production: TÃ¼m test fonksiyonlarÄ± kaldÄ±rÄ±ldÄ± - UI artÄ±k temiz -->
                    
                    if (!response.ok) {
                        console.error(`âŒ ${file}: HTTP ${response.status}`);
                        continue;
                    }
                    
                    const text = await response.text();
                    console.log(`ğŸ“ ${file} first 100 chars:`, text.substring(0, 100));
                    
                    // BOM kontrol
                    if (text.charCodeAt(0) === 0xFEFF) {
                        console.warn(`âš ï¸ ${file} has BOM`);
                    }
                    
                    // JSON parse test
                    const cleanText = text.replace(/^\uFEFF/, '');
                    const data = JSON.parse(cleanText);
                    
                    console.log(`âœ… ${file}: OK (${Array.isArray(data) ? data.length + ' items' : 'object'})`);
                    
                } catch (error) {
                    console.error(`âŒ ${file}:`, error.message);
                }
            }
        };
    </script>
    
    <!-- Test BaÅŸlatma FonksiyonlarÄ± -->
    <script>
        // HÄ±zlÄ± test fonksiyonu
        function quickTest() {
            console.log("ğŸš€ HIZLI TEST BAÅLATIYOR...");
            if (window.HASENETestSuite) {
                const testSuite = new window.HASENETestSuite();
                return testSuite.runAllTests();
            }
        }
        
        // Sadece performans testi
        function performanceTest() {
            console.log("âš¡ PERFORMANS TESTÄ°...");
            if (window.HASENETestSuite) {
                const testSuite = new window.HASENETestSuite();
                return testSuite.performanceTests();
            }
        }
        
        // Sadece bug testi
        function bugTest() {
            console.log("ğŸ› BUG TESTÄ°...");
            if (window.HASENETestSuite) {
                const testSuite = new window.HASENETestSuite();
                return testSuite.bugTests();
            }
        }
        
        // Oyun modu testleri
        function gameModeTest() {
            console.log("ğŸ® OYUN MODU TESTLERÄ°...");
            if (window.HASENETestSuite) {
                const testSuite = new window.HASENETestSuite();
                return testSuite.gameModeTests();
            }
        }
        
        // ğŸ® Comprehensive Final Test Function
        function finalTest() {
            console.log("ğŸš€ HASENE Arabic Game - Final Comprehensive Test");
            console.log("===============================================");
            
            // Test Achievement System
            console.log("ğŸ† Testing Achievement System...");
            const achievementCount = Object.keys(game.achievements).length;
            const unlockedCount = Object.values(game.achievements).filter(a => a.unlocked).length;
            console.log(`   âœ… ${achievementCount} achievements loaded, ${unlockedCount} unlocked`);
            
            // Test Sound System
            console.log("ğŸ”Š Testing Sound System...");
            if (window.audioGenerator) {
                console.log("   âœ… Audio Generator initialized");
                window.audioGenerator.playCorrectSound();
            }
            
            // Test Mobile Optimization
            console.log("ğŸ“± Testing Mobile Features...");
            console.log(`   âœ… Touch optimization: ${!!game.initializeMobileOptimization}`);
            
            // Test Performance
            console.log("âš¡ Testing Performance...");
            const perfReport = game.getPerformanceReport();
            console.log("   âœ… Performance report:", perfReport);
            
            // Test Social Features
            console.log("ğŸŒŸ Testing Social Features...");
            console.log(`   âœ… Leaderboard entries: ${game.leaderboardData.length}`);
            
            // Test Daily Missions
            console.log("ğŸ¯ Testing Daily Missions...");
            const missions = game.updateDailyProgress('test', 1);
            console.log("   âœ… Daily missions system active");
            
            console.log("===============================================");
            console.log("ğŸ‰ All systems operational! Game is ready!");
            
            return {
                achievements: achievementCount,
                unlocked: unlockedCount,
                sound: !!window.audioGenerator,
                performance: perfReport,
                leaderboard: game.leaderboardData.length,
                status: "âœ… FULLY OPERATIONAL"
            };
        }

        // ğŸ† COMPREHENSIVE ACHIEVEMENT TESTING FUNCTION
        function testAllAchievements() {
            console.log("ğŸ¯ ROZET SÄ°STEMÄ° KAPSAMLI TEST BAÅLATIYOR...");
            console.log("================================================");
            
            if (!window.game) {
                console.error("âŒ Game instance not found!");
                return false;
            }
            
            let testResults = {
                totalAchievements: 0,
                validAchievements: 0,
                invalidAchievements: 0,
                rarityDistribution: { bronze: 0, silver: 0, gold: 0, diamond: 0 },
                functionalTests: {
                    unlock: 0,
                    display: 0,
                    filter: 0,
                    progress: 0
                },
                errors: []
            };
            
            // 1. Achievement YapÄ±sÄ± Testi
            console.log("1ï¸âƒ£ Achievement YapÄ±sÄ± Test Ediliyor...");
            Object.entries(game.achievements).forEach(([id, achievement]) => {
                testResults.totalAchievements++;
                
                // Required fields kontrolÃ¼
                const requiredFields = ['id', 'title', 'description', 'rarity', 'unlocked'];
                const hasAllFields = requiredFields.every(field => achievement.hasOwnProperty(field));
                
                if (hasAllFields) {
                    testResults.validAchievements++;
                    testResults.rarityDistribution[achievement.rarity]++;
                    console.log(`   âœ… ${id}: ${achievement.title} (${achievement.rarity})`);
                } else {
                    testResults.invalidAchievements++;
                    testResults.errors.push(`âŒ ${id}: Missing required fields`);
                    console.error(`   âŒ ${id}: Missing required fields`);
                }
            });
            
            // 2. Rarity DaÄŸÄ±lÄ±mÄ± Analizi
            console.log("2ï¸âƒ£ Rarity DaÄŸÄ±lÄ±mÄ± Analizi...");
            console.log(`   ğŸ¥‰ Bronze: ${testResults.rarityDistribution.bronze} rozet`);
            console.log(`   ğŸ¥ˆ Silver: ${testResults.rarityDistribution.silver} rozet`);
            console.log(`   ğŸ¥‡ Gold: ${testResults.rarityDistribution.gold} rozet`);
            console.log(`   ğŸ’ Diamond: ${testResults.rarityDistribution.diamond} rozet`);
            
            // 3. Achievement Unlock Testi
            console.log("3ï¸âƒ£ Achievement Unlock MekanizmasÄ± Test...");
            
            // Unlock fonksiyonunu test etmek iÃ§in geÃ§ici test achievement'Ä± oluÅŸtur
            const testId = 'tempTestAchievement';
            game.achievements[testId] = {
                id: testId,
                title: 'Test Achievement',
                description: 'Temporary test achievement',
                rarity: 'bronze',
                unlocked: false
            };
            
            try {
                const result = game.unlockAchievement(testId);
                if (result && game.achievements[testId].unlocked) {
                    testResults.functionalTests.unlock = 1;
                    console.log("   âœ… Achievement unlock mechanism working");
                } else {
                    testResults.errors.push("âŒ Unlock function returned false or achievement not marked as unlocked");
                    console.error("   âŒ Unlock function returned false or achievement not marked as unlocked");
                }
                
                // Test achievement'Ä± sil
                delete game.achievements[testId];
                const index = game.unlockedAchievements.indexOf(testId);
                if (index > -1) {
                    game.unlockedAchievements.splice(index, 1);
                }
                
            } catch (error) {
                testResults.errors.push(`âŒ Unlock mechanism error: ${error.message}`);
                console.error(`   âŒ Unlock mechanism error: ${error.message}`);
                
                // Test achievement'Ä± sil (hata durumunda)
                delete game.achievements[testId];
            }
            }
            
            // 4. Modal Display Testi
            console.log("4ï¸âƒ£ Achievement Modal Display Test...");
            try {
                game.showAchievements();
                const modal = document.getElementById('achievementsModal');
                if (modal && modal.style.display !== 'none') {
                    testResults.functionalTests.display = 1;
                    console.log("   âœ… Achievement modal displays correctly");
                    
                    // Modal'Ä± kapat
                    setTimeout(() => {
                        game.closeAchievementsModal();
                    }, 100);
                } else {
                    testResults.errors.push("âŒ Achievement modal display failed");
                    console.error("   âŒ Achievement modal display failed");
                }
            } catch (error) {
                testResults.errors.push(`âŒ Modal display error: ${error.message}`);
                console.error(`   âŒ Modal display error: ${error.message}`);
            }
            
            // 5. Filter Functionality Testi
            console.log("5ï¸âƒ£ Achievement Filter Test...");
            const rarities = ['all', 'bronze', 'silver', 'gold', 'diamond'];
            let filtersWorking = 0;
            
            rarities.forEach(rarity => {
                try {
                    game.filterAchievements(rarity);
                    const grid = document.getElementById('achievementsGrid');
                    if (grid) {
                        filtersWorking++;
                        console.log(`   âœ… ${rarity} filter working`);
                    }
                } catch (error) {
                    testResults.errors.push(`âŒ Filter ${rarity} error: ${error.message}`);
                    console.error(`   âŒ Filter ${rarity} error: ${error.message}`);
                }
            });
            
            testResults.functionalTests.filter = filtersWorking / rarities.length;
            
            // 6. Progress Bar Testi
            console.log("6ï¸âƒ£ Progress Bar Test...");
            try {
                game.updateProgressBars();
                const progressElements = ['bronzeProgress', 'silverProgress', 'goldProgress', 'diamondProgress'];
                let progressWorking = 0;
                
                progressElements.forEach(elemId => {
                    const elem = document.getElementById(elemId);
                    if (elem && elem.style.width !== undefined) {
                        progressWorking++;
                        console.log(`   âœ… ${elemId} progress bar working`);
                    }
                });
                
                testResults.functionalTests.progress = progressWorking / progressElements.length;
            } catch (error) {
                testResults.errors.push(`âŒ Progress bar error: ${error.message}`);
                console.error(`   âŒ Progress bar error: ${error.message}`);
            }
            
            // 7. Achievement Emoji Testi
            console.log("7ï¸âƒ£ Achievement Emoji Test...");
            let emojiCount = 0;
            Object.keys(game.achievements).forEach(achievementId => {
                const emoji = game.getAchievementEmoji(achievementId);
                if (emoji && emoji !== 'ğŸ†') {
                    emojiCount++;
                }
            });
            console.log(`   âœ… ${emojiCount}/${testResults.totalAchievements} achievements have custom emojis`);
            
            // 8. Share Functionality Testi
            console.log("8ï¸âƒ£ Share Function Test...");
            try {
                // Unlock bir achievement varsa share test et
                const unlockedAchievement = Object.entries(game.achievements).find(([id, ach]) => ach.unlocked);
                if (unlockedAchievement) {
                    // Share fonksiyonu test et (sadece kontrol, gerÃ§ekte paylaÅŸmaz)
                    if (typeof game.shareAchievement === 'function') {
                        console.log("   âœ… Share functionality available");
                    }
                } else {
                    console.log("   âš ï¸ No unlocked achievements to test sharing");
                }
            } catch (error) {
                testResults.errors.push(`âŒ Share test error: ${error.message}`);
                console.error(`   âŒ Share test error: ${error.message}`);
            }
            
            // 9. Final Results
            console.log("================================================");
            console.log("ğŸ† ROZET SÄ°STEMÄ° TEST SONUÃ‡LARI:");
            console.log(`ğŸ“Š Toplam Rozet: ${testResults.totalAchievements}`);
            console.log(`âœ… GeÃ§erli Rozet: ${testResults.validAchievements}`);
            console.log(`âŒ HatalÄ± Rozet: ${testResults.invalidAchievements}`);
            console.log(`ğŸ¯ Unlock Test: ${testResults.functionalTests.unlock ? 'âœ…' : 'âŒ'}`);
            console.log(`ğŸ“± Display Test: ${testResults.functionalTests.display ? 'âœ…' : 'âŒ'}`);
            console.log(`ğŸ” Filter Test: ${Math.round(testResults.functionalTests.filter * 100)}%`);
            console.log(`ğŸ“Š Progress Test: ${Math.round(testResults.functionalTests.progress * 100)}%`);
            
            if (testResults.errors.length > 0) {
                console.log("âš ï¸ HATALAR:");
                testResults.errors.forEach(error => console.log(`   ${error}`));
            }
            
            const overallScore = (
                (testResults.validAchievements / testResults.totalAchievements) + 
                testResults.functionalTests.unlock +
                testResults.functionalTests.display +
                testResults.functionalTests.filter +
                testResults.functionalTests.progress
            ) / 5;
            
            console.log(`ğŸ¯ GENEL SKOR: ${Math.round(overallScore * 100)}%`);
            console.log(overallScore > 0.9 ? "ğŸ‰ SÄ°STEM MÃœKEMMEL!" : 
                       overallScore > 0.7 ? "âœ… SÄ°STEM Ä°YÄ°!" : "âš ï¸ Ä°YÄ°LEÅTÄ°RME GEREKLÄ°!");
            console.log("================================================");
            
            return testResults;
        

    </script>

    <script>
    // ğŸš« Production versiyonunda tehlikeli test fonksiyonlarÄ± kaldÄ±rÄ±ldÄ±
    // Bu fonksiyonlar kullanÄ±cÄ± verilerini sildiÄŸi iÃ§in production'da olmamalÄ±
    </script>

    <!-- ğŸµ Sound Settings Modal -->
        }
    </script>

    <!-- ğŸµ Sound Settings Modal -->
    <div id="soundSettingsModal" class="modal-overlay" style="display: none; visibility: hidden;">
        <div class="modal-content sound-settings-modal">
            <div class="modal-header">
                <h3><i class="fas fa-music"></i> Ses AyarlarÄ±</h3>
                <button class="close-btn" onclick="closeSoundSettings()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="sound-setting-group">
                    <div class="setting-header">
                        <h4><i class="fas fa-volume-up"></i> Ana Ses Seviyesi</h4>
                        <span id="masterVolumeValue">70%</span>
                    </div>
                    <input type="range" id="masterVolumeSlider" min="0" max="100" value="70" 
                           class="volume-slider" oninput="updateMasterVolume(this.value)">
                </div>
                
                <div class="sound-setting-group">
                    <div class="setting-header">
                        <h4><i class="fas fa-music"></i> Arkaplan MÃ¼ziÄŸi</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="backgroundMusicToggle" onchange="toggleBackgroundMusic(this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="music-options" id="musicOptions">
                        <select id="musicTypeSelect" onchange="changeMusicType(this.value)">
                            <option value="ambient">ğŸŒ™ Sakin MÃ¼zik</option>
                            <option value="focus">ğŸ¯ Odaklanma MÃ¼ziÄŸi</option>
                            <option value="celebration">ğŸ‰ Kutlama MÃ¼ziÄŸi</option>
                        </select>
                    </div>
                </div>
                
                <div class="sound-setting-group">
                    <div class="setting-header">
                        <h4><i class="fas fa-bell"></i> Ses Efektleri</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="soundEffectsToggle" checked onchange="toggleSoundEffects(this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="sound-setting-group">
                    <div class="setting-header">
                        <h4><i class="fas fa-trophy"></i> BaÅŸarÄ±m Sesleri</h4>
                        <label class="toggle-switch">
                            <input type="checkbox" id="achievementSoundsToggle" checked onchange="toggleAchievementSounds(this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="sound-test-buttons">
                    <button class="btn test-btn" onclick="testSoundEffect()">
                        <i class="fas fa-play"></i> Ses Efekti Test
                    </button>
                    <button class="btn test-btn" onclick="testAchievementSound()">
                        <i class="fas fa-trophy"></i> BaÅŸarÄ±m Sesi Test
                    </button>
                    <button class="btn test-btn" onclick="testBackgroundMusic()">
                        <i class="fas fa-music"></i> MÃ¼zik Test
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>